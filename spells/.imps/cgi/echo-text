#!/bin/sh
# echo-text - CGI script that echoes back the submitted text
set -eu

http-status 200 "OK"
http-header "Content-Type" "text/html"
http-end-headers

# Parse query string to get text parameter
text=""
if [ -n "${QUERY_STRING:-}" ]; then
  # Extract text=value from query string
  text=$(printf '%s' "$QUERY_STRING" | sed 's/^text=//' | sed 's/&.*//' | url-decode)
fi

if [ -z "$text" ]; then
  text="No text provided"
fi

cat <<HTML
<div class="demo-result">
  <h3>Echo Result:</h3>
  <p><strong>${text}</strong></p>
  <p class="meta">Processed by shell CGI at $(date)</p>
</div>
HTML
