#!/bin/sh
# sse-batch EVENT_TYPE - Begin batching SSE events
# Outputs multiple data fields for a single event, improving efficiency
# Example: 
#   sse-batch message
#   printf 'data: line1\ndata: line2\ndata: line3\n\n'
#   sse-padding 2
set -eu

event_type="${1:-message}"

printf '[sse-batch] Starting batch for event type: %s\n' "$event_type" >&2

# Output event type
printf 'event: %s\n' "$event_type"

# Caller should output multiple data: lines
# Then call sse-padding and blank line to complete the batch
