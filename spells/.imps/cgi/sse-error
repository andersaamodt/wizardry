#!/bin/sh
# sse-error ERROR_CODE MESSAGE - Send standardized SSE error event
# Standard error event format for SSE streams
# Example: sse-error 404 "Room not found"
set -eu

error_code="${1:-500}"
error_message="${2:-Internal Server Error}"

printf '[sse-error] code=%s msg=%s\n' "$error_code" "$error_message" >&2

# Send error event with structured data
printf 'event: error\n'
printf 'data: {"code":%s,"message":"%s"}\n' "$error_code" "$error_message"

# Add padding for buffer flush
sse-padding 2

printf '\n'
