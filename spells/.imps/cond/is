#!/bin/sh
# is TYPE PATH - test path against type (file/dir/link/exec/readable/writable/empty/set/unset)
# Examples: is file /etc/passwd | is dir /tmp | is exec /bin/sh | is set "$VAR"

_is() {
  case "$1" in
    file)     [ -f "$2" ] ;;
    dir)      [ -d "$2" ] ;;
    link)     [ -L "$2" ] ;;
    exec)     [ -x "$2" ] ;;
    readable) [ -r "$2" ] ;;
    writable) [ -w "$2" ] ;;
    empty)    if [ -f "$2" ]; then [ ! -s "$2" ]; elif [ -d "$2" ]; then [ -z "$(ls -A "$2" 2>/dev/null)" ]; else return 1; fi ;;
    set)      [ -n "$2" ] ;;
    unset)    [ -z "$2" ] ;;
    *)        return 1 ;;
  esac
}

# Self-execute when run directly (not sourced)
case "$0" in
  */is) _is "$@" ;; esac
