#!/bin/sh
# usage-error NAME MESSAGE - print usage error and exit with code 2
# Example: usage-error "my-spell" "unknown option: -x"
set -eu

# Redirect stdin from /dev/null to prevent hanging on macOS
exec </dev/null

_ue_name=${1:-}
_ue_message=${2:-}
if [ -n "$_ue_name" ]; then
  printf '%s: %s\n' "$_ue_name" "${_ue_message:-usage error}" >&2
elif [ -n "$_ue_message" ]; then
  printf '%s\n' "$_ue_message" >&2
fi
exit 2
