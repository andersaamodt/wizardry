#!/bin/sh
# usage-error NAME MESSAGE - print usage error and return exit code 2
# Example: usage-error "my-spell" "unknown option: -x"

set -eu

name=${1:-}
message=${2:-}

# Format message with name prefix if both provided, otherwise just print message
if [ -n "$name" ]; then
  printf '%s: %s\n' "$name" "${message:-usage error}" >&2
elif [ -n "$message" ]; then
  printf '%s\n' "$message" >&2
fi
exit 2
