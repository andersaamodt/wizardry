#!/bin/sh
# each COMMAND [ARGS...] - run command for each line of stdin (line appended as last arg)
# Example: ls | each echo "File:"


usage() {
        cat <<'USAGE' >&2
Usage: each COMMAND [ARGS...]

Run command for each line of stdin (line appended as last arg). Example: ls | each echo "File:".
USAGE
}

case "${1-}" in
--help|--usage|-h)
        usage
        exit 0
        ;;
esac

while IFS= read -r line; do "$@" "$line"; done
