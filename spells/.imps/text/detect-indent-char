#!/bin/sh
# detect-indent-char FILE - detect whether file uses spaces or tabs for indentation
# Outputs: "space", "tab", or "space" (default). Example: indent=$(detect-indent-char config.nix)
set -eu


dic_file=${1-}

if [ -z "$dic_file" ] || [ ! -f "$dic_file" ]; then
  printf 'space\n'
  exit 0
fi

dic_tabs=0
dic_spaces=0
dic_tabs=$(grep -c '^	' "$dic_file" 2>/dev/null) || dic_tabs=0
dic_spaces=$(grep -c '^  ' "$dic_file" 2>/dev/null) || dic_spaces=0

if [ "$dic_tabs" -gt "$dic_spaces" ]; then
  printf 'tab\n'
else
  printf 'space\n'
fi
