#!/bin/sh
# detect-indent-char FILE - detect whether file uses spaces or tabs for indentation
# Outputs: "space", "tab", or "space" (default if no indentation found)
# Example: indent=$(detect-indent-char config.nix)

set -eu

file=${1-}

if [ -z "$file" ] || [ ! -f "$file" ]; then
	printf 'space\n'
	exit 0
fi

# Count lines starting with tab vs space
tabs=0
spaces=0
tabs=$(grep -c '^	' "$file" 2>/dev/null) || tabs=0
spaces=$(grep -c '^  ' "$file" 2>/dev/null) || spaces=0

if [ "$tabs" -gt "$spaces" ]; then
	printf 'tab\n'
else
	printf 'space\n'
fi
