#!/bin/sh
# nix-shell-status NAME FILE - check if shell init block exists in nix config
# Example: nix-shell-status myspell home.nix && echo "installed"
set -eu


nss_block_name=${1:-}
nss_nix_file=${2:-}

if [ -z "$nss_block_name" ] || [ -z "$nss_nix_file" ]; then
  printf '%s\n' "nix-shell-status: NAME and FILE are required" >&2
  exit 1
fi

nss_marker="# wizardry: $nss_block_name"

[ -f "$nss_nix_file" ] && grep -Fq "$nss_marker" "$nss_nix_file" 2>/dev/null
exit $?
