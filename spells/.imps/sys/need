#!/bin/sh
# need COMMAND [MESSAGE] - exit with error if command not available
# Example: need git | need curl "curl is required for downloads"


usage() {
        cat <<'USAGE' >&2
Usage: need COMMAND [MESSAGE]

Exit with error if command not available. Example: need git | need curl "curl is required for downloads".
USAGE
}

case "${1-}" in
--help|--usage|-h)
        usage
        exit 0
        ;;
esac

if command -v "$1" >/dev/null 2>&1; then exit 0; fi
msg=${2:-"required command not found: $1"}
printf '%s\n' "$msg" >&2
exit 1
