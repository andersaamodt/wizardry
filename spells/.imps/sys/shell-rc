#!/bin/sh
# shell-rc - print path to first existing shell rc file suitable for sourcing
# Returns a shell rc file path (bashrc, zshrc, etc.) suitable for adding source commands.
# On NixOS, this finds a shell rc file since .nix files cannot contain shell source commands.
# Exit code: 0 if found, 1 if no suitable shell rc file exists
# Example: rc=$(shell-rc) && echo "source myfile" >> "$rc"

set -eu

: "${HOME:?shell-rc: HOME not set}"

# Check common shell rc files in order of preference
for candidate in "$HOME/.bashrc" "$HOME/.zshrc" "$HOME/.bash_profile" "$HOME/.profile"; do
  if [ -f "$candidate" ]; then
    printf '%s\n' "$candidate"
    exit 0
  fi
done

# No existing rc file found
exit 1
