#!/bin/sh
# rc-has-line MARKER RC_FILE - check if marker exists in rc file
# Example: rc-has-line cd-hook ~/.zshrc && echo "found"

# Conditional imp - no set -eu (returns exit codes for flow control)
set +eu

_rhl_marker=${1:-}
_rhl_rc_file=${2:-}

if [ -z "$_rhl_marker" ] || [ -z "$_rhl_rc_file" ]; then
  exit 1
fi

if [ ! -f "$_rhl_rc_file" ]; then
  exit 1
fi

_rhl_full_marker="# wizardry: $_rhl_marker"
grep -qF "$_rhl_full_marker" "$_rhl_rc_file" 2>/dev/null
