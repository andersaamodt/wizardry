#!/bin/sh
# test-assert-success STATUS [ERROR] - assert command succeeded (status 0)
# Exits 0 if STATUS is 0, otherwise exits 1 with failure message.
# Example: test-assert-success "$STATUS" "$ERROR" || return 1

set -eu
_status=${1:-1}
_error=${2:-}
if [ "$_status" -ne 0 ]; then
  if [ -n "$_error" ]; then
    printf 'expected status 0 but got %s; stderr: %s\n' "$_status" "$_error" >&2
  else
    printf 'expected status 0 but got %s\n' "$_status" >&2
  fi
  exit 1
fi
