#!/bin/sh
# assert-success - test assertion that STATUS equals 0
# Testing imp - fails if STATUS variable is not 0
# Example: assert-success || return 1


usage() {
        cat <<'USAGE' >&2
Usage: assert-success

Test assertion that STATUS equals 0 Testing imp - fails if STATUS variable is not 0. Example: assert-success || return 1.
USAGE
}

case "${1-}" in
--help|--usage|-h)
        usage
        exit 0
        ;;
esac

if [ "${STATUS:-1}" -ne 0 ]; then
  if [ -n "${ERROR-}" ]; then
    TEST_FAILURE_REASON="expected status 0 but got $STATUS; stderr: $ERROR"
  else
    TEST_FAILURE_REASON="expected status 0 but got $STATUS"
  fi
  exit 1
fi
