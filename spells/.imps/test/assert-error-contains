#!/bin/sh
# assert-error-contains ERROR SUBSTRING - assert stderr contains text
# Exits 0 if ERROR contains SUBSTRING, otherwise exits 1.
# Example: test-assert-error-contains "$ERROR" "error msg" || return 1

set -eu
_error=$1
_substring=$2
case "$_error" in
  *"$_substring"*) exit 0 ;;
esac
printf 'stderr missing substring: %s\n' "$_substring" >&2
exit 1
