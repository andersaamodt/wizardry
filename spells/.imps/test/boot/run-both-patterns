#!/bin/sh
# run-both-patterns DESC FUNC [SPELL_PATH] - DEPRECATED dual-pattern test runner
# Historical note: This was used to test spells both via direct execution and 
# source-then-invoke when the castable/uncastable pattern was in use.
# Since spells are now flat linear scripts, dual-pattern testing is no longer applicable.
# This imp is retained for backward compatibility but simply runs direct execution.
set -eu

desc=$1
func=$2
spell_path=${3-}

# Increment subtest number (already done by caller, but kept for compatibility)
_test_index=$(cat "${WIZARDRY_TMPDIR}/_test_index")

# Since dual-pattern testing is deprecated, just run the test function normally
# This matches the default behavior in run-test-case
if "$func"; then
  report-result "$_test_index" "$desc" 0
else
  status=$?
  TEST_FAILURE_REASON=${TEST_FAILURE_REASON-test function failed}
  export TEST_FAILURE_REASON
  report-result "$_test_index" "$desc" "$status"
fi
