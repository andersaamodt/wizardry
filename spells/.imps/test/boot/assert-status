#!/bin/sh
# assert-status EXPECTED - verify STATUS matches expected exit code
# Sets TEST_FAILURE_REASON on mismatch.
set -eu

expected_status=$1
if [ "$STATUS" -ne "$expected_status" ]; then
  if [ -n "${ERROR-}" ]; then
    TEST_FAILURE_REASON="expected status $expected_status but got $STATUS; stderr: $ERROR"
  else
    TEST_FAILURE_REASON="expected status $expected_status but got $STATUS"
  fi
  exit 1
fi
exit 0


