#!/bin/sh
# test-summary PASSED TOTAL [FAILED] [SKIPPED] - output test summary line
# Example: test-summary 5 10
# Example: test-summary 5 10 2 3

set -eu

_test_summary() {
  passed=$1
  total=$2
  failed=${3-0}
  skipped=${4-0}
  
  printf '%s/%s tests passed' "$passed" "$total"
  
  if [ "$failed" -gt 0 ]; then
    printf ' (%s failed' "$failed"
    if [ "$skipped" -gt 0 ]; then
      printf ', %s skipped' "$skipped"
    fi
    printf ')\n'
  elif [ "$skipped" -gt 0 ]; then
    printf ' (%s skipped)\n' "$skipped"
  else
    printf '\n'
  fi
}

# Self-execution when run directly (not sourced)
case "${0##*/}" in test-summary) _test_summary "$@" ;; esac
