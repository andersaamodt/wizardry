#!/bin/sh
# assert-error-contains SUBSTRING - verify ERROR contains the substring
# Sets TEST_FAILURE_REASON on mismatch.
set -eu

_assert_error_contains() {
  substring=$1
  case "$ERROR" in
    *"$substring"*)
      return 0
      ;;
    *)
      TEST_FAILURE_REASON="stderr missing substring: $substring"
      return 1
      ;;
  esac
}

# Self-execution when run directly (not sourced)
set -eu
case "${0##*/}" in assert-error-contains) _assert_error_contains "$@" ;; esac
