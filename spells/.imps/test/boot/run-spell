#!/bin/sh
# run-spell SCRIPT [ARGS...] - run a spell script in a sandboxed environment
# Wraps run-cmd with the ROOT_DIR prefix for the script path.
# Automatically switches to run-sourced-spell when WIZARDRY_USE_SOURCED_SPELL=1
set -eu

# Check if we should use sourced spell instead
if [ "${WIZARDRY_USE_SOURCED_SPELL-0}" = "1" ]; then
  run-sourced-spell "$@"
  return $?
fi

# Normal direct execution
script=$1
shift || true
run-cmd "$ROOT_DIR/$script" "$@"


