#!/bin/sh
# find-repo-root - locate the wizardry repository root by walking up directories
# Prints the repository root path containing spells/ and .tests/ directories.
set -eu

dir=$(CDPATH= cd -- "$(dirname "${0:-$PWD}")" && pwd -P)
while [ "$dir" != "/" ]; do
  if [ -d "$dir/spells" ] && [ -d "$dir/.tests" ]; then
    printf '%s\n' "$dir"
  exit 0
  fi
  dir=$(dirname "$dir")
done
printf '%s\n' "$(pwd -P)"


