#!/bin/sh
# test-skip DESC REASON - output a test skip message
# Example: test-skip "spell handles error" "mode mismatch"

set -eu

test_skip() {
  desc=$1
  reason=${2-}
  
  # Get global subtest number if available
  num=${WIZARDRY_GLOBAL_SUBTEST_NUM-}
  
  if [ -n "$num" ]; then
    # When run through test-magic with global numbering
    if [ -n "$reason" ]; then
      printf 'SKIP #%s %s: %s\n' "$num" "$desc" "$reason"
    else
      printf 'SKIP #%s %s\n' "$num" "$desc"
    fi
  else
    # When run standalone, use old format for backward compatibility
    if [ -n "$reason" ]; then
      printf '  SKIP %s %s\n' "$desc" "$reason"
    else
      printf '  SKIP %s\n' "$desc"
    fi
  fi
}


test_skip "$@"
