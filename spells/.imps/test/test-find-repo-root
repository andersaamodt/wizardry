#!/bin/sh
# find-repo-root - find the wizardry repository root directory
# Testing imp - walks up from current directory to find spells/ and .tests/
# Example: ROOT=$(find-repo-root)

dir=$(CDPATH= cd -- "$(dirname "${0:-$PWD}")" && pwd -P)
while [ "$dir" != "/" ]; do
  if [ -d "$dir/spells" ] && [ -d "$dir/.tests" ]; then
    printf '%s\n' "$dir"
    exit 0
  fi
  dir=$(dirname "$dir")
done
printf '%s\n' "$(pwd -P)"
