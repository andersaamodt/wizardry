#!/bin/sh
# assert-file-contains FILE SUBSTRING - assert file contains text
# Exits 0 if FILE exists and contains SUBSTRING, otherwise exits 1.
# Example: test-assert-file-contains "output.txt" "expected" || return 1

set -eu
_file=$1
_substring=$2
if [ ! -f "$_file" ]; then
  printf 'expected file missing: %s\n' "$_file" >&2
  exit 1
fi
if grep -qF -- "$_substring" "$_file" 2>/dev/null; then
  exit 0
fi
printf 'file %s missing substring: %s\n' "$_file" "$_substring" >&2
exit 1
