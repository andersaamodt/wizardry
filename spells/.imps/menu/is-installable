#!/bin/sh
# is-installable COMMAND - check if a spell has an install() function
# Returns 0 if the spell has an install() function, 1 otherwise
# Example: is-installable my-spell && echo "has install"

if [ -z "${1-}" ]; then
  exit 1
fi

_ii_spell_cmd=$1
_ii_spell_path=$(command -v "$_ii_spell_cmd" 2>/dev/null) || _ii_spell_path=$_ii_spell_cmd

if [ ! -r "$_ii_spell_path" ]; then
  exit 1
fi

grep -Eq '^[[:space:]]*install[[:space:]]*\(\)' "$_ii_spell_path" 2>/dev/null
