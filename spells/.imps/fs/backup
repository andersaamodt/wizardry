#!/bin/sh
# backup FILE [SUFFIX] - create backup copy of file (default suffix: .bak)
# Example: backup /etc/ssh/sshd_config | backup myfile .orig
set -eu


bk_file=${1:-}
bk_suffix=${2:-.bak}

if [ -z "$bk_file" ]; then
  printf '%s\n' "backup: file path required" >&2
  exit 1
fi

if [ ! -f "$bk_file" ]; then
  printf '%s\n' "backup: not a file: $bk_file" >&2
  exit 1
fi

cp "$bk_file" "${bk_file}${bk_suffix}" || exit 1
printf '%s\n' "${bk_file}${bk_suffix}"
