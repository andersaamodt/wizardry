#!/bin/sh
# pkg-manager - detect which package manager is available
# Example: pm=$(pkg-manager) && case $pm in apt) apt-get install ;; esac
set -eu

_pkg_manager() {
  if command -v apt-get >/dev/null 2>&1; then echo apt
  elif command -v dnf >/dev/null 2>&1; then echo dnf
  elif command -v pacman >/dev/null 2>&1; then echo pacman
  elif command -v brew >/dev/null 2>&1; then echo brew
  elif command -v nix-env >/dev/null 2>&1; then echo nix
  elif command -v pkgin >/dev/null 2>&1; then echo pkgin
  elif command -v apk >/dev/null 2>&1; then echo apk
  else return 1; fi
}

# Self-execute when run directly (not sourced)
case "$0" in
  */pkg-manager) [ "${_WIZARDRY_SOURCING:-}" != "1" ] && _pkg_manager "$@" ;; esac
