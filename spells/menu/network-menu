#!/bin/sh
# Network configuration menu - work in progress

network_menu_usage() {
  cat <<'USAGE'
Usage: network-menu

Displays network configuration options.
USAGE
}



network_menu() {
case "${1-}" in
--help|--usage|-h)
  network_menu_usage
  return 0
  ;;
esac

require-wizardry || return 1

set -eu
. env-clear

require-command menu || return 1

trap 'exit 0' INT TERM
exit_label=$(exit-label)
exit_item="${exit_label}%kill -TERM \$PPID"

menu "Network Menu:" \
  "Configure static IP%configure-static-ip" \
  "Configure DHCP%configure-dhcp" \
  "$exit_item" || true

}


# Load castable imp for direct execution
if ! command -v castable >/dev/null 2>&1; then
  _d=$(CDPATH= cd -- "$(dirname "$0")" && pwd -P)
  _r=$(cd "$_d" && while [ ! -d "spells/.imps" ] && [ "$(pwd)" != "/" ]; do cd ..; done; pwd)
  _i="${WIZARDRY_DIR:-${_r}}/spells/.imps/sys"
  [ -f "$_i/castable" ] && . "$_i/castable"
fi

castable "$@"
