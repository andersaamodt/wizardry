#!/bin/sh

# This spell displays a command before executing it for teaching purposes.
# Use it to show commands to those learning the path of wizardry.

show_usage() {
        cat <<'USAGE'
Usage: wizard-cast <command> [arguments...]

Display the command using wizard-eyes, then execute it. Useful for
demonstrating commands to novice wizards while they learn.
USAGE
}

case "${1-}" in
--help|--usage|-h)
        show_usage
        exit 0
        ;;
esac

set -eu

# Check argument
if [ -z "${1-}" ]; then
        printf '%s\n' "wizard-cast: command required." >&2
        exit 1
fi

# Display the command using wizard-eyes if available
if has wizard-eyes; then
        wizard-eyes "$*"
else
        printf '    %s\n' "$*" >&2
fi

# Execute the command
"$@"
