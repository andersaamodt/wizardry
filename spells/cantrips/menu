#!/bin/sh

# Present an interactive menu using only POSIX shell features. This variant
# relies on existing cantrips (await_keypress, move-cursor, etc.) to handle the
# terminal work so it can remain portable across macOS, Debian, and NixOS.



# Bootstrap: Load essential functions if not already available
# This allows menu to work when executed directly (tests) or when invoked (normal use)

# Use conditional strictness based on execution context
# See .github/CODE_POLICY_SET_EU.md for details

# Wrapper functions for helper commands
# Only define if the underlying command is available
# This allows 'require' to properly detect missing dependencies








# Verify that all helper spells are ready before drawing the menu.
# Uses the shared 'require' imp for dependency checking.





# Load colour helpers when present; otherwise fall back to plain text.
# Try to find colors in the same directory when executed directly

# If not loaded from script_dir, try function or PATH

# Check for --show-command flag (displays command as label instead of description)

# Check for --start-selection flag (start cursor on specific item)








# Use start_selection if valid, otherwise default to 1













# At this stage the cursor sits on the row immediately following the menu
# heading (or at the top of the screen when no heading was provided). That row
# becomes the anchor for the first menu option so the items render directly
# beneath the title.


# Reserve vertical space before drawing anything so that the menu can repaint
# in place without pushing the terminal history around as selections change.
















