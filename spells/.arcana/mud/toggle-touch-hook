#!/bin/sh

# Toggle touch hook on/off in MUD config.

case "${1-}" in
--help|--usage|-h)
  cat <<'USAGE'
Usage: toggle-touch-hook

Toggle the touch hook that triggers on-touch effects when you touch files. When enabled, touching a portkey will activate it, and shocking-grasp will deal damage to touched files.
USAGE
  exit 0
  ;;
esac

require-wizardry || exit 1

set -eu
. env-clear

# Get script directory to find mud-config
script_dir=$(CDPATH= cd -- "$(dirname "$0")" && pwd -P)

# Toggle the feature and report state
new_state=$("$script_dir/mud-config" toggle touch-hook)

if [ "$new_state" = "1" ]; then
  printf '%s\n' "✓ Touch hook enabled. Restart your shell or run 'invoke-wizardry' to activate."
else
  printf '%s\n' "✓ Touch hook disabled."
fi
