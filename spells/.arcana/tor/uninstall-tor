#!/bin/sh

# Uninstall Tor and attempt to undo configuration changes.

case "${1-}" in
--help|--usage|-h)
  cat <<'USAGE'
Usage: uninstall-tor

Removes Tor binaries where possible and undoes NixOS configuration entries added by install-tor.
USAGE
  exit 0
  ;;
esac

require-wizardry || exit 1

set -eu
. env-clear

uninstall_tor_is_nixos() {
  if command -v detect-distro >/dev/null 2>&1 && [ "$(detect-distro 2>/dev/null)" = "nixos" ]; then
    return 0
  fi
  return 1
