#!/bin/sh
# Start tor service

case "${1-}" in
--help|--usage|-h)
  cat <<'USAGE'
Usage: start-tor

Start the tor service.

Tries systemctl (Linux) first, then direct execution.
USAGE
  exit 0
  ;;
esac

set -eu

printf 'Starting tor...\n'

# Try systemctl (Linux with systemd)
if command -v systemctl >/dev/null 2>&1; then
  if sudo systemctl start tor 2>/dev/null; then
    printf 'Tor started via systemctl.\n'
    exit 0
  fi
fi

# Try direct execution
if command -v tor >/dev/null 2>&1; then
  if tor >/dev/null 2>&1 &; then
    printf 'Tor started.\n'
    exit 0
  fi
fi

printf 'start-tor: failed to start tor\n' >&2
exit 1
