#!/bin/sh

# Bootstrap spell: installs a clipboard helper for the current environment.

case "${1-}" in
--help|--usage|-h)
  cat <<'USAGE'
Usage: install-clipboard-helper

Installs a clipboard helper for the current environment. Detects if one is already installed and prefers the best option for the platform (macOS: pbcopy, Wayland: wl-copy, X11: xsel or xclip).
USAGE
  exit 0
  ;;
esac

require_wizardry || exit 1

set -eu
SCRIPT_DIR=$(CDPATH= cd -- "$(dirname "$0")" && pwd -P)

# Detect which clipboard helper is already installed
install_clipboard_helper_detect_installed_helper() {
  if command -v pbcopy >/dev/null 2>&1; then
    printf 'pbcopy'
  elif command -v xsel >/dev/null 2>&1; then
    printf 'xsel'
  elif command -v xclip >/dev/null 2>&1; then
    printf 'xclip'
  elif command -v wl-copy >/dev/null 2>&1; then
    printf 'wl-copy'
  else
    printf ''
  fi
