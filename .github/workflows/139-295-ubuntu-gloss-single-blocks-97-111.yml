name: 139-295 Ubuntu gloss single blocks 97-111

on:
  pull_request:

concurrency:
  group: ${{ github.workflow }}-${{ github.event.pull_request.number || github.ref }}
  cancel-in-progress: true

permissions:
  contents: read

jobs:
  block-97:
    name: 139-295 Ubuntu gloss block 97
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4
      - name: Install xattr tooling
        run: sudo apt-get update && sudo apt-get install -y attr
      - name: Load block 97 and run banish
        run: |
          set +e
          ulimit -c unlimited || true
          (
            set -e
            . spells/.imps/sys/invoke-wizardry
            gloss_dir=$(mktemp -d /tmp/wizardry-gloss-blocks.XXXXXX)
            gloss_file=$(mktemp /tmp/wizardry-gloss.XXXXXX)
            generate-glosses --output "$gloss_file"

            awk_program=$(printf '%s\n' \
              'BEGIN { idx=0; out="" }' \
              '/^# First-word gloss/ {' \
              '  idx++' \
              '  out=sprintf("%s/block-%03d.sh", outdir, idx)' \
              '  print "# block " idx > out' \
              '}' \
              '{ if (out != "") print >> out }' \
              'END { printf "%d\n", idx > outdir "/count" }')
            awk -v outdir="$gloss_dir" "$awk_program" "$gloss_file"

            block="$gloss_dir/block-097.sh"
            if [ ! -s "$block" ]; then
              printf "%s\n" "[gloss-test] missing block 97" >&2
              exit 1
            fi
            . "$block"
            banish 8 --only --no-tests --no-heal
          )
          status=$?
          if [ "$status" -eq 139 ]; then
            printf '%s\n' "subshell banish exited with code 139 (SIGSEGV)"
            printf '%s\n' "Last 50 dmesg lines (if available):"
            dmesg | tail -n 50 || true
          fi
          exit "$status"

  block-98:
    name: 139-296 Ubuntu gloss block 98
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4
      - name: Install xattr tooling
        run: sudo apt-get update && sudo apt-get install -y attr
      - name: Load block 98 and run banish
        run: |
          set +e
          ulimit -c unlimited || true
          (
            set -e
            . spells/.imps/sys/invoke-wizardry
            gloss_dir=$(mktemp -d /tmp/wizardry-gloss-blocks.XXXXXX)
            gloss_file=$(mktemp /tmp/wizardry-gloss.XXXXXX)
            generate-glosses --output "$gloss_file"

            awk_program=$(printf '%s\n' \
              'BEGIN { idx=0; out="" }' \
              '/^# First-word gloss/ {' \
              '  idx++' \
              '  out=sprintf("%s/block-%03d.sh", outdir, idx)' \
              '  print "# block " idx > out' \
              '}' \
              '{ if (out != "") print >> out }' \
              'END { printf "%d\n", idx > outdir "/count" }')
            awk -v outdir="$gloss_dir" "$awk_program" "$gloss_file"

            block="$gloss_dir/block-098.sh"
            if [ ! -s "$block" ]; then
              printf "%s\n" "[gloss-test] missing block 98" >&2
              exit 1
            fi
            . "$block"
            banish 8 --only --no-tests --no-heal
          )
          status=$?
          if [ "$status" -eq 139 ]; then
            printf '%s\n' "subshell banish exited with code 139 (SIGSEGV)"
            printf '%s\n' "Last 50 dmesg lines (if available):"
            dmesg | tail -n 50 || true
          fi
          exit "$status"

  block-99:
    name: 139-297 Ubuntu gloss block 99
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4
      - name: Install xattr tooling
        run: sudo apt-get update && sudo apt-get install -y attr
      - name: Load block 99 and run banish
        run: |
          set +e
          ulimit -c unlimited || true
          (
            set -e
            . spells/.imps/sys/invoke-wizardry
            gloss_dir=$(mktemp -d /tmp/wizardry-gloss-blocks.XXXXXX)
            gloss_file=$(mktemp /tmp/wizardry-gloss.XXXXXX)
            generate-glosses --output "$gloss_file"

            awk_program=$(printf '%s\n' \
              'BEGIN { idx=0; out="" }' \
              '/^# First-word gloss/ {' \
              '  idx++' \
              '  out=sprintf("%s/block-%03d.sh", outdir, idx)' \
              '  print "# block " idx > out' \
              '}' \
              '{ if (out != "") print >> out }' \
              'END { printf "%d\n", idx > outdir "/count" }')
            awk -v outdir="$gloss_dir" "$awk_program" "$gloss_file"

            block="$gloss_dir/block-099.sh"
            if [ ! -s "$block" ]; then
              printf "%s\n" "[gloss-test] missing block 99" >&2
              exit 1
            fi
            . "$block"
            banish 8 --only --no-tests --no-heal
          )
          status=$?
          if [ "$status" -eq 139 ]; then
            printf '%s\n' "subshell banish exited with code 139 (SIGSEGV)"
            printf '%s\n' "Last 50 dmesg lines (if available):"
            dmesg | tail -n 50 || true
          fi
          exit "$status"

  block-100:
    name: 139-298 Ubuntu gloss block 100
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4
      - name: Install xattr tooling
        run: sudo apt-get update && sudo apt-get install -y attr
      - name: Load block 100 and run banish
        run: |
          set +e
          ulimit -c unlimited || true
          (
            set -e
            . spells/.imps/sys/invoke-wizardry
            gloss_dir=$(mktemp -d /tmp/wizardry-gloss-blocks.XXXXXX)
            gloss_file=$(mktemp /tmp/wizardry-gloss.XXXXXX)
            generate-glosses --output "$gloss_file"

            awk_program=$(printf '%s\n' \
              'BEGIN { idx=0; out="" }' \
              '/^# First-word gloss/ {' \
              '  idx++' \
              '  out=sprintf("%s/block-%03d.sh", outdir, idx)' \
              '  print "# block " idx > out' \
              '}' \
              '{ if (out != "") print >> out }' \
              'END { printf "%d\n", idx > outdir "/count" }')
            awk -v outdir="$gloss_dir" "$awk_program" "$gloss_file"

            block="$gloss_dir/block-100.sh"
            if [ ! -s "$block" ]; then
              printf "%s\n" "[gloss-test] missing block 100" >&2
              exit 1
            fi
            . "$block"
            banish 8 --only --no-tests --no-heal
          )
          status=$?
          if [ "$status" -eq 139 ]; then
            printf '%s\n' "subshell banish exited with code 139 (SIGSEGV)"
            printf '%s\n' "Last 50 dmesg lines (if available):"
            dmesg | tail -n 50 || true
          fi
          exit "$status"

  block-101:
    name: 139-299 Ubuntu gloss block 101
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4
      - name: Install xattr tooling
        run: sudo apt-get update && sudo apt-get install -y attr
      - name: Load block 101 and run banish
        run: |
          set +e
          ulimit -c unlimited || true
          (
            set -e
            . spells/.imps/sys/invoke-wizardry
            gloss_dir=$(mktemp -d /tmp/wizardry-gloss-blocks.XXXXXX)
            gloss_file=$(mktemp /tmp/wizardry-gloss.XXXXXX)
            generate-glosses --output "$gloss_file"

            awk_program=$(printf '%s\n' \
              'BEGIN { idx=0; out="" }' \
              '/^# First-word gloss/ {' \
              '  idx++' \
              '  out=sprintf("%s/block-%03d.sh", outdir, idx)' \
              '  print "# block " idx > out' \
              '}' \
              '{ if (out != "") print >> out }' \
              'END { printf "%d\n", idx > outdir "/count" }')
            awk -v outdir="$gloss_dir" "$awk_program" "$gloss_file"

            block="$gloss_dir/block-101.sh"
            if [ ! -s "$block" ]; then
              printf "%s\n" "[gloss-test] missing block 101" >&2
              exit 1
            fi
            . "$block"
            banish 8 --only --no-tests --no-heal
          )
          status=$?
          if [ "$status" -eq 139 ]; then
            printf '%s\n' "subshell banish exited with code 139 (SIGSEGV)"
            printf '%s\n' "Last 50 dmesg lines (if available):"
            dmesg | tail -n 50 || true
          fi
          exit "$status"

  block-102:
    name: 139-300 Ubuntu gloss block 102
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4
      - name: Install xattr tooling
        run: sudo apt-get update && sudo apt-get install -y attr
      - name: Load block 102 and run banish
        run: |
          set +e
          ulimit -c unlimited || true
          (
            set -e
            . spells/.imps/sys/invoke-wizardry
            gloss_dir=$(mktemp -d /tmp/wizardry-gloss-blocks.XXXXXX)
            gloss_file=$(mktemp /tmp/wizardry-gloss.XXXXXX)
            generate-glosses --output "$gloss_file"

            awk_program=$(printf '%s\n' \
              'BEGIN { idx=0; out="" }' \
              '/^# First-word gloss/ {' \
              '  idx++' \
              '  out=sprintf("%s/block-%03d.sh", outdir, idx)' \
              '  print "# block " idx > out' \
              '}' \
              '{ if (out != "") print >> out }' \
              'END { printf "%d\n", idx > outdir "/count" }')
            awk -v outdir="$gloss_dir" "$awk_program" "$gloss_file"

            block="$gloss_dir/block-102.sh"
            if [ ! -s "$block" ]; then
              printf "%s\n" "[gloss-test] missing block 102" >&2
              exit 1
            fi
            . "$block"
            banish 8 --only --no-tests --no-heal
          )
          status=$?
          if [ "$status" -eq 139 ]; then
            printf '%s\n' "subshell banish exited with code 139 (SIGSEGV)"
            printf '%s\n' "Last 50 dmesg lines (if available):"
            dmesg | tail -n 50 || true
          fi
          exit "$status"

  block-103:
    name: 139-301 Ubuntu gloss block 103
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4
      - name: Install xattr tooling
        run: sudo apt-get update && sudo apt-get install -y attr
      - name: Load block 103 and run banish
        run: |
          set +e
          ulimit -c unlimited || true
          (
            set -e
            . spells/.imps/sys/invoke-wizardry
            gloss_dir=$(mktemp -d /tmp/wizardry-gloss-blocks.XXXXXX)
            gloss_file=$(mktemp /tmp/wizardry-gloss.XXXXXX)
            generate-glosses --output "$gloss_file"

            awk_program=$(printf '%s\n' \
              'BEGIN { idx=0; out="" }' \
              '/^# First-word gloss/ {' \
              '  idx++' \
              '  out=sprintf("%s/block-%03d.sh", outdir, idx)' \
              '  print "# block " idx > out' \
              '}' \
              '{ if (out != "") print >> out }' \
              'END { printf "%d\n", idx > outdir "/count" }')
            awk -v outdir="$gloss_dir" "$awk_program" "$gloss_file"

            block="$gloss_dir/block-103.sh"
            if [ ! -s "$block" ]; then
              printf "%s\n" "[gloss-test] missing block 103" >&2
              exit 1
            fi
            . "$block"
            banish 8 --only --no-tests --no-heal
          )
          status=$?
          if [ "$status" -eq 139 ]; then
            printf '%s\n' "subshell banish exited with code 139 (SIGSEGV)"
            printf '%s\n' "Last 50 dmesg lines (if available):"
            dmesg | tail -n 50 || true
          fi
          exit "$status"

  block-104:
    name: 139-302 Ubuntu gloss block 104
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4
      - name: Install xattr tooling
        run: sudo apt-get update && sudo apt-get install -y attr
      - name: Load block 104 and run banish
        run: |
          set +e
          ulimit -c unlimited || true
          (
            set -e
            . spells/.imps/sys/invoke-wizardry
            gloss_dir=$(mktemp -d /tmp/wizardry-gloss-blocks.XXXXXX)
            gloss_file=$(mktemp /tmp/wizardry-gloss.XXXXXX)
            generate-glosses --output "$gloss_file"

            awk_program=$(printf '%s\n' \
              'BEGIN { idx=0; out="" }' \
              '/^# First-word gloss/ {' \
              '  idx++' \
              '  out=sprintf("%s/block-%03d.sh", outdir, idx)' \
              '  print "# block " idx > out' \
              '}' \
              '{ if (out != "") print >> out }' \
              'END { printf "%d\n", idx > outdir "/count" }')
            awk -v outdir="$gloss_dir" "$awk_program" "$gloss_file"

            block="$gloss_dir/block-104.sh"
            if [ ! -s "$block" ]; then
              printf "%s\n" "[gloss-test] missing block 104" >&2
              exit 1
            fi
            . "$block"
            banish 8 --only --no-tests --no-heal
          )
          status=$?
          if [ "$status" -eq 139 ]; then
            printf '%s\n' "subshell banish exited with code 139 (SIGSEGV)"
            printf '%s\n' "Last 50 dmesg lines (if available):"
            dmesg | tail -n 50 || true
          fi
          exit "$status"

  block-105:
    name: 139-303 Ubuntu gloss block 105
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4
      - name: Install xattr tooling
        run: sudo apt-get update && sudo apt-get install -y attr
      - name: Load block 105 and run banish
        run: |
          set +e
          ulimit -c unlimited || true
          (
            set -e
            . spells/.imps/sys/invoke-wizardry
            gloss_dir=$(mktemp -d /tmp/wizardry-gloss-blocks.XXXXXX)
            gloss_file=$(mktemp /tmp/wizardry-gloss.XXXXXX)
            generate-glosses --output "$gloss_file"

            awk_program=$(printf '%s\n' \
              'BEGIN { idx=0; out="" }' \
              '/^# First-word gloss/ {' \
              '  idx++' \
              '  out=sprintf("%s/block-%03d.sh", outdir, idx)' \
              '  print "# block " idx > out' \
              '}' \
              '{ if (out != "") print >> out }' \
              'END { printf "%d\n", idx > outdir "/count" }')
            awk -v outdir="$gloss_dir" "$awk_program" "$gloss_file"

            block="$gloss_dir/block-105.sh"
            if [ ! -s "$block" ]; then
              printf "%s\n" "[gloss-test] missing block 105" >&2
              exit 1
            fi
            . "$block"
            banish 8 --only --no-tests --no-heal
          )
          status=$?
          if [ "$status" -eq 139 ]; then
            printf '%s\n' "subshell banish exited with code 139 (SIGSEGV)"
            printf '%s\n' "Last 50 dmesg lines (if available):"
            dmesg | tail -n 50 || true
          fi
          exit "$status"

  block-106:
    name: 139-304 Ubuntu gloss block 106
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4
      - name: Install xattr tooling
        run: sudo apt-get update && sudo apt-get install -y attr
      - name: Load block 106 and run banish
        run: |
          set +e
          ulimit -c unlimited || true
          (
            set -e
            . spells/.imps/sys/invoke-wizardry
            gloss_dir=$(mktemp -d /tmp/wizardry-gloss-blocks.XXXXXX)
            gloss_file=$(mktemp /tmp/wizardry-gloss.XXXXXX)
            generate-glosses --output "$gloss_file"

            awk_program=$(printf '%s\n' \
              'BEGIN { idx=0; out="" }' \
              '/^# First-word gloss/ {' \
              '  idx++' \
              '  out=sprintf("%s/block-%03d.sh", outdir, idx)' \
              '  print "# block " idx > out' \
              '}' \
              '{ if (out != "") print >> out }' \
              'END { printf "%d\n", idx > outdir "/count" }')
            awk -v outdir="$gloss_dir" "$awk_program" "$gloss_file"

            block="$gloss_dir/block-106.sh"
            if [ ! -s "$block" ]; then
              printf "%s\n" "[gloss-test] missing block 106" >&2
              exit 1
            fi
            . "$block"
            banish 8 --only --no-tests --no-heal
          )
          status=$?
          if [ "$status" -eq 139 ]; then
            printf '%s\n' "subshell banish exited with code 139 (SIGSEGV)"
            printf '%s\n' "Last 50 dmesg lines (if available):"
            dmesg | tail -n 50 || true
          fi
          exit "$status"

  block-107:
    name: 139-305 Ubuntu gloss block 107
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4
      - name: Install xattr tooling
        run: sudo apt-get update && sudo apt-get install -y attr
      - name: Load block 107 and run banish
        run: |
          set +e
          ulimit -c unlimited || true
          (
            set -e
            . spells/.imps/sys/invoke-wizardry
            gloss_dir=$(mktemp -d /tmp/wizardry-gloss-blocks.XXXXXX)
            gloss_file=$(mktemp /tmp/wizardry-gloss.XXXXXX)
            generate-glosses --output "$gloss_file"

            awk_program=$(printf '%s\n' \
              'BEGIN { idx=0; out="" }' \
              '/^# First-word gloss/ {' \
              '  idx++' \
              '  out=sprintf("%s/block-%03d.sh", outdir, idx)' \
              '  print "# block " idx > out' \
              '}' \
              '{ if (out != "") print >> out }' \
              'END { printf "%d\n", idx > outdir "/count" }')
            awk -v outdir="$gloss_dir" "$awk_program" "$gloss_file"

            block="$gloss_dir/block-107.sh"
            if [ ! -s "$block" ]; then
              printf "%s\n" "[gloss-test] missing block 107" >&2
              exit 1
            fi
            . "$block"
            banish 8 --only --no-tests --no-heal
          )
          status=$?
          if [ "$status" -eq 139 ]; then
            printf '%s\n' "subshell banish exited with code 139 (SIGSEGV)"
            printf '%s\n' "Last 50 dmesg lines (if available):"
            dmesg | tail -n 50 || true
          fi
          exit "$status"

  block-108:
    name: 139-306 Ubuntu gloss block 108
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4
      - name: Install xattr tooling
        run: sudo apt-get update && sudo apt-get install -y attr
      - name: Load block 108 and run banish
        run: |
          set +e
          ulimit -c unlimited || true
          (
            set -e
            . spells/.imps/sys/invoke-wizardry
            gloss_dir=$(mktemp -d /tmp/wizardry-gloss-blocks.XXXXXX)
            gloss_file=$(mktemp /tmp/wizardry-gloss.XXXXXX)
            generate-glosses --output "$gloss_file"

            awk_program=$(printf '%s\n' \
              'BEGIN { idx=0; out="" }' \
              '/^# First-word gloss/ {' \
              '  idx++' \
              '  out=sprintf("%s/block-%03d.sh", outdir, idx)' \
              '  print "# block " idx > out' \
              '}' \
              '{ if (out != "") print >> out }' \
              'END { printf "%d\n", idx > outdir "/count" }')
            awk -v outdir="$gloss_dir" "$awk_program" "$gloss_file"

            block="$gloss_dir/block-108.sh"
            if [ ! -s "$block" ]; then
              printf "%s\n" "[gloss-test] missing block 108" >&2
              exit 1
            fi
            . "$block"
            banish 8 --only --no-tests --no-heal
          )
          status=$?
          if [ "$status" -eq 139 ]; then
            printf '%s\n' "subshell banish exited with code 139 (SIGSEGV)"
            printf '%s\n' "Last 50 dmesg lines (if available):"
            dmesg | tail -n 50 || true
          fi
          exit "$status"

  block-109:
    name: 139-307 Ubuntu gloss block 109
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4
      - name: Install xattr tooling
        run: sudo apt-get update && sudo apt-get install -y attr
      - name: Load block 109 and run banish
        run: |
          set +e
          ulimit -c unlimited || true
          (
            set -e
            . spells/.imps/sys/invoke-wizardry
            gloss_dir=$(mktemp -d /tmp/wizardry-gloss-blocks.XXXXXX)
            gloss_file=$(mktemp /tmp/wizardry-gloss.XXXXXX)
            generate-glosses --output "$gloss_file"

            awk_program=$(printf '%s\n' \
              'BEGIN { idx=0; out="" }' \
              '/^# First-word gloss/ {' \
              '  idx++' \
              '  out=sprintf("%s/block-%03d.sh", outdir, idx)' \
              '  print "# block " idx > out' \
              '}' \
              '{ if (out != "") print >> out }' \
              'END { printf "%d\n", idx > outdir "/count" }')
            awk -v outdir="$gloss_dir" "$awk_program" "$gloss_file"

            block="$gloss_dir/block-109.sh"
            if [ ! -s "$block" ]; then
              printf "%s\n" "[gloss-test] missing block 109" >&2
              exit 1
            fi
            . "$block"
            banish 8 --only --no-tests --no-heal
          )
          status=$?
          if [ "$status" -eq 139 ]; then
            printf '%s\n' "subshell banish exited with code 139 (SIGSEGV)"
            printf '%s\n' "Last 50 dmesg lines (if available):"
            dmesg | tail -n 50 || true
          fi
          exit "$status"

  block-110:
    name: 139-308 Ubuntu gloss block 110
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4
      - name: Install xattr tooling
        run: sudo apt-get update && sudo apt-get install -y attr
      - name: Load block 110 and run banish
        run: |
          set +e
          ulimit -c unlimited || true
          (
            set -e
            . spells/.imps/sys/invoke-wizardry
            gloss_dir=$(mktemp -d /tmp/wizardry-gloss-blocks.XXXXXX)
            gloss_file=$(mktemp /tmp/wizardry-gloss.XXXXXX)
            generate-glosses --output "$gloss_file"

            awk_program=$(printf '%s\n' \
              'BEGIN { idx=0; out="" }' \
              '/^# First-word gloss/ {' \
              '  idx++' \
              '  out=sprintf("%s/block-%03d.sh", outdir, idx)' \
              '  print "# block " idx > out' \
              '}' \
              '{ if (out != "") print >> out }' \
              'END { printf "%d\n", idx > outdir "/count" }')
            awk -v outdir="$gloss_dir" "$awk_program" "$gloss_file"

            block="$gloss_dir/block-110.sh"
            if [ ! -s "$block" ]; then
              printf "%s\n" "[gloss-test] missing block 110" >&2
              exit 1
            fi
            . "$block"
            banish 8 --only --no-tests --no-heal
          )
          status=$?
          if [ "$status" -eq 139 ]; then
            printf '%s\n' "subshell banish exited with code 139 (SIGSEGV)"
            printf '%s\n' "Last 50 dmesg lines (if available):"
            dmesg | tail -n 50 || true
          fi
          exit "$status"

  block-111:
    name: 139-309 Ubuntu gloss block 111
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4
      - name: Install xattr tooling
        run: sudo apt-get update && sudo apt-get install -y attr
      - name: Load block 111 and run banish
        run: |
          set +e
          ulimit -c unlimited || true
          (
            set -e
            . spells/.imps/sys/invoke-wizardry
            gloss_dir=$(mktemp -d /tmp/wizardry-gloss-blocks.XXXXXX)
            gloss_file=$(mktemp /tmp/wizardry-gloss.XXXXXX)
            generate-glosses --output "$gloss_file"

            awk_program=$(printf '%s\n' \
              'BEGIN { idx=0; out="" }' \
              '/^# First-word gloss/ {' \
              '  idx++' \
              '  out=sprintf("%s/block-%03d.sh", outdir, idx)' \
              '  print "# block " idx > out' \
              '}' \
              '{ if (out != "") print >> out }' \
              'END { printf "%d\n", idx > outdir "/count" }')
            awk -v outdir="$gloss_dir" "$awk_program" "$gloss_file"

            block="$gloss_dir/block-111.sh"
            if [ ! -s "$block" ]; then
              printf "%s\n" "[gloss-test] missing block 111" >&2
              exit 1
            fi
            . "$block"
            banish 8 --only --no-tests --no-heal
          )
          status=$?
          if [ "$status" -eq 139 ]; then
            printf '%s\n' "subshell banish exited with code 139 (SIGSEGV)"
            printf '%s\n' "Last 50 dmesg lines (if available):"
            dmesg | tail -n 50 || true
          fi
          exit "$status"
