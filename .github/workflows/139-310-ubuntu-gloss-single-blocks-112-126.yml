name: 139-310 Ubuntu gloss single blocks 112-126

on:
  pull_request:

concurrency:
  group: ${{ github.workflow }}-${{ github.event.pull_request.number || github.ref }}
  cancel-in-progress: true

permissions:
  contents: read

jobs:
  block-112:
    name: 139-310 Ubuntu gloss block 112
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4
      - name: Install xattr tooling
        run: sudo apt-get update && sudo apt-get install -y attr
      - name: Load block 112 and run banish
        run: |
          set +e
          ulimit -c unlimited || true
          (
            set -e
            . spells/.imps/sys/invoke-wizardry
            gloss_dir=$(mktemp -d /tmp/wizardry-gloss-blocks.XXXXXX)
            gloss_file=$(mktemp /tmp/wizardry-gloss.XXXXXX)
            generate-glosses --output "$gloss_file"

            awk_program=$(printf '%s\n' \
              'BEGIN { idx=0; out="" }' \
              '/^# First-word gloss/ {' \
              '  idx++' \
              '  out=sprintf("%s/block-%03d.sh", outdir, idx)' \
              '  print "# block " idx > out' \
              '}' \
              '{ if (out != "") print >> out }' \
              'END { printf "%d\n", idx > outdir "/count" }')
            awk -v outdir="$gloss_dir" "$awk_program" "$gloss_file"

            block="$gloss_dir/block-112.sh"
            if [ ! -s "$block" ]; then
              printf "%s\n" "[gloss-test] missing block 112" >&2
              exit 1
            fi
            . "$block"
            banish 8 --only --no-tests --no-heal
          )
          status=$?
          if [ "$status" -eq 139 ]; then
            printf '%s\n' "subshell banish exited with code 139 (SIGSEGV)"
            printf '%s\n' "Last 50 dmesg lines (if available):"
            dmesg | tail -n 50 || true
          fi
          exit "$status"

  block-113:
    name: 139-311 Ubuntu gloss block 113
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4
      - name: Install xattr tooling
        run: sudo apt-get update && sudo apt-get install -y attr
      - name: Load block 113 and run banish
        run: |
          set +e
          ulimit -c unlimited || true
          (
            set -e
            . spells/.imps/sys/invoke-wizardry
            gloss_dir=$(mktemp -d /tmp/wizardry-gloss-blocks.XXXXXX)
            gloss_file=$(mktemp /tmp/wizardry-gloss.XXXXXX)
            generate-glosses --output "$gloss_file"

            awk_program=$(printf '%s\n' \
              'BEGIN { idx=0; out="" }' \
              '/^# First-word gloss/ {' \
              '  idx++' \
              '  out=sprintf("%s/block-%03d.sh", outdir, idx)' \
              '  print "# block " idx > out' \
              '}' \
              '{ if (out != "") print >> out }' \
              'END { printf "%d\n", idx > outdir "/count" }')
            awk -v outdir="$gloss_dir" "$awk_program" "$gloss_file"

            block="$gloss_dir/block-113.sh"
            if [ ! -s "$block" ]; then
              printf "%s\n" "[gloss-test] missing block 113" >&2
              exit 1
            fi
            . "$block"
            banish 8 --only --no-tests --no-heal
          )
          status=$?
          if [ "$status" -eq 139 ]; then
            printf '%s\n' "subshell banish exited with code 139 (SIGSEGV)"
            printf '%s\n' "Last 50 dmesg lines (if available):"
            dmesg | tail -n 50 || true
          fi
          exit "$status"

  block-114:
    name: 139-312 Ubuntu gloss block 114
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4
      - name: Install xattr tooling
        run: sudo apt-get update && sudo apt-get install -y attr
      - name: Load block 114 and run banish
        run: |
          set +e
          ulimit -c unlimited || true
          (
            set -e
            . spells/.imps/sys/invoke-wizardry
            gloss_dir=$(mktemp -d /tmp/wizardry-gloss-blocks.XXXXXX)
            gloss_file=$(mktemp /tmp/wizardry-gloss.XXXXXX)
            generate-glosses --output "$gloss_file"

            awk_program=$(printf '%s\n' \
              'BEGIN { idx=0; out="" }' \
              '/^# First-word gloss/ {' \
              '  idx++' \
              '  out=sprintf("%s/block-%03d.sh", outdir, idx)' \
              '  print "# block " idx > out' \
              '}' \
              '{ if (out != "") print >> out }' \
              'END { printf "%d\n", idx > outdir "/count" }')
            awk -v outdir="$gloss_dir" "$awk_program" "$gloss_file"

            block="$gloss_dir/block-114.sh"
            if [ ! -s "$block" ]; then
              printf "%s\n" "[gloss-test] missing block 114" >&2
              exit 1
            fi
            . "$block"
            banish 8 --only --no-tests --no-heal
          )
          status=$?
          if [ "$status" -eq 139 ]; then
            printf '%s\n' "subshell banish exited with code 139 (SIGSEGV)"
            printf '%s\n' "Last 50 dmesg lines (if available):"
            dmesg | tail -n 50 || true
          fi
          exit "$status"

  block-115:
    name: 139-313 Ubuntu gloss block 115
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4
      - name: Install xattr tooling
        run: sudo apt-get update && sudo apt-get install -y attr
      - name: Load block 115 and run banish
        run: |
          set +e
          ulimit -c unlimited || true
          (
            set -e
            . spells/.imps/sys/invoke-wizardry
            gloss_dir=$(mktemp -d /tmp/wizardry-gloss-blocks.XXXXXX)
            gloss_file=$(mktemp /tmp/wizardry-gloss.XXXXXX)
            generate-glosses --output "$gloss_file"

            awk_program=$(printf '%s\n' \
              'BEGIN { idx=0; out="" }' \
              '/^# First-word gloss/ {' \
              '  idx++' \
              '  out=sprintf("%s/block-%03d.sh", outdir, idx)' \
              '  print "# block " idx > out' \
              '}' \
              '{ if (out != "") print >> out }' \
              'END { printf "%d\n", idx > outdir "/count" }')
            awk -v outdir="$gloss_dir" "$awk_program" "$gloss_file"

            block="$gloss_dir/block-115.sh"
            if [ ! -s "$block" ]; then
              printf "%s\n" "[gloss-test] missing block 115" >&2
              exit 1
            fi
            . "$block"
            banish 8 --only --no-tests --no-heal
          )
          status=$?
          if [ "$status" -eq 139 ]; then
            printf '%s\n' "subshell banish exited with code 139 (SIGSEGV)"
            printf '%s\n' "Last 50 dmesg lines (if available):"
            dmesg | tail -n 50 || true
          fi
          exit "$status"

  block-116:
    name: 139-314 Ubuntu gloss block 116
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4
      - name: Install xattr tooling
        run: sudo apt-get update && sudo apt-get install -y attr
      - name: Load block 116 and run banish
        run: |
          set +e
          ulimit -c unlimited || true
          (
            set -e
            . spells/.imps/sys/invoke-wizardry
            gloss_dir=$(mktemp -d /tmp/wizardry-gloss-blocks.XXXXXX)
            gloss_file=$(mktemp /tmp/wizardry-gloss.XXXXXX)
            generate-glosses --output "$gloss_file"

            awk_program=$(printf '%s\n' \
              'BEGIN { idx=0; out="" }' \
              '/^# First-word gloss/ {' \
              '  idx++' \
              '  out=sprintf("%s/block-%03d.sh", outdir, idx)' \
              '  print "# block " idx > out' \
              '}' \
              '{ if (out != "") print >> out }' \
              'END { printf "%d\n", idx > outdir "/count" }')
            awk -v outdir="$gloss_dir" "$awk_program" "$gloss_file"

            block="$gloss_dir/block-116.sh"
            if [ ! -s "$block" ]; then
              printf "%s\n" "[gloss-test] missing block 116" >&2
              exit 1
            fi
            . "$block"
            banish 8 --only --no-tests --no-heal
          )
          status=$?
          if [ "$status" -eq 139 ]; then
            printf '%s\n' "subshell banish exited with code 139 (SIGSEGV)"
            printf '%s\n' "Last 50 dmesg lines (if available):"
            dmesg | tail -n 50 || true
          fi
          exit "$status"

  block-117:
    name: 139-315 Ubuntu gloss block 117
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4
      - name: Install xattr tooling
        run: sudo apt-get update && sudo apt-get install -y attr
      - name: Load block 117 and run banish
        run: |
          set +e
          ulimit -c unlimited || true
          (
            set -e
            . spells/.imps/sys/invoke-wizardry
            gloss_dir=$(mktemp -d /tmp/wizardry-gloss-blocks.XXXXXX)
            gloss_file=$(mktemp /tmp/wizardry-gloss.XXXXXX)
            generate-glosses --output "$gloss_file"

            awk_program=$(printf '%s\n' \
              'BEGIN { idx=0; out="" }' \
              '/^# First-word gloss/ {' \
              '  idx++' \
              '  out=sprintf("%s/block-%03d.sh", outdir, idx)' \
              '  print "# block " idx > out' \
              '}' \
              '{ if (out != "") print >> out }' \
              'END { printf "%d\n", idx > outdir "/count" }')
            awk -v outdir="$gloss_dir" "$awk_program" "$gloss_file"

            block="$gloss_dir/block-117.sh"
            if [ ! -s "$block" ]; then
              printf "%s\n" "[gloss-test] missing block 117" >&2
              exit 1
            fi
            . "$block"
            banish 8 --only --no-tests --no-heal
          )
          status=$?
          if [ "$status" -eq 139 ]; then
            printf '%s\n' "subshell banish exited with code 139 (SIGSEGV)"
            printf '%s\n' "Last 50 dmesg lines (if available):"
            dmesg | tail -n 50 || true
          fi
          exit "$status"

  block-118:
    name: 139-316 Ubuntu gloss block 118
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4
      - name: Install xattr tooling
        run: sudo apt-get update && sudo apt-get install -y attr
      - name: Load block 118 and run banish
        run: |
          set +e
          ulimit -c unlimited || true
          (
            set -e
            . spells/.imps/sys/invoke-wizardry
            gloss_dir=$(mktemp -d /tmp/wizardry-gloss-blocks.XXXXXX)
            gloss_file=$(mktemp /tmp/wizardry-gloss.XXXXXX)
            generate-glosses --output "$gloss_file"

            awk_program=$(printf '%s\n' \
              'BEGIN { idx=0; out="" }' \
              '/^# First-word gloss/ {' \
              '  idx++' \
              '  out=sprintf("%s/block-%03d.sh", outdir, idx)' \
              '  print "# block " idx > out' \
              '}' \
              '{ if (out != "") print >> out }' \
              'END { printf "%d\n", idx > outdir "/count" }')
            awk -v outdir="$gloss_dir" "$awk_program" "$gloss_file"

            block="$gloss_dir/block-118.sh"
            if [ ! -s "$block" ]; then
              printf "%s\n" "[gloss-test] missing block 118" >&2
              exit 1
            fi
            . "$block"
            banish 8 --only --no-tests --no-heal
          )
          status=$?
          if [ "$status" -eq 139 ]; then
            printf '%s\n' "subshell banish exited with code 139 (SIGSEGV)"
            printf '%s\n' "Last 50 dmesg lines (if available):"
            dmesg | tail -n 50 || true
          fi
          exit "$status"

  block-119:
    name: 139-317 Ubuntu gloss block 119
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4
      - name: Install xattr tooling
        run: sudo apt-get update && sudo apt-get install -y attr
      - name: Load block 119 and run banish
        run: |
          set +e
          ulimit -c unlimited || true
          (
            set -e
            . spells/.imps/sys/invoke-wizardry
            gloss_dir=$(mktemp -d /tmp/wizardry-gloss-blocks.XXXXXX)
            gloss_file=$(mktemp /tmp/wizardry-gloss.XXXXXX)
            generate-glosses --output "$gloss_file"

            awk_program=$(printf '%s\n' \
              'BEGIN { idx=0; out="" }' \
              '/^# First-word gloss/ {' \
              '  idx++' \
              '  out=sprintf("%s/block-%03d.sh", outdir, idx)' \
              '  print "# block " idx > out' \
              '}' \
              '{ if (out != "") print >> out }' \
              'END { printf "%d\n", idx > outdir "/count" }')
            awk -v outdir="$gloss_dir" "$awk_program" "$gloss_file"

            block="$gloss_dir/block-119.sh"
            if [ ! -s "$block" ]; then
              printf "%s\n" "[gloss-test] missing block 119" >&2
              exit 1
            fi
            . "$block"
            banish 8 --only --no-tests --no-heal
          )
          status=$?
          if [ "$status" -eq 139 ]; then
            printf '%s\n' "subshell banish exited with code 139 (SIGSEGV)"
            printf '%s\n' "Last 50 dmesg lines (if available):"
            dmesg | tail -n 50 || true
          fi
          exit "$status"

  block-120:
    name: 139-318 Ubuntu gloss block 120
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4
      - name: Install xattr tooling
        run: sudo apt-get update && sudo apt-get install -y attr
      - name: Load block 120 and run banish
        run: |
          set +e
          ulimit -c unlimited || true
          (
            set -e
            . spells/.imps/sys/invoke-wizardry
            gloss_dir=$(mktemp -d /tmp/wizardry-gloss-blocks.XXXXXX)
            gloss_file=$(mktemp /tmp/wizardry-gloss.XXXXXX)
            generate-glosses --output "$gloss_file"

            awk_program=$(printf '%s\n' \
              'BEGIN { idx=0; out="" }' \
              '/^# First-word gloss/ {' \
              '  idx++' \
              '  out=sprintf("%s/block-%03d.sh", outdir, idx)' \
              '  print "# block " idx > out' \
              '}' \
              '{ if (out != "") print >> out }' \
              'END { printf "%d\n", idx > outdir "/count" }')
            awk -v outdir="$gloss_dir" "$awk_program" "$gloss_file"

            block="$gloss_dir/block-120.sh"
            if [ ! -s "$block" ]; then
              printf "%s\n" "[gloss-test] missing block 120" >&2
              exit 1
            fi
            . "$block"
            banish 8 --only --no-tests --no-heal
          )
          status=$?
          if [ "$status" -eq 139 ]; then
            printf '%s\n' "subshell banish exited with code 139 (SIGSEGV)"
            printf '%s\n' "Last 50 dmesg lines (if available):"
            dmesg | tail -n 50 || true
          fi
          exit "$status"

  block-121:
    name: 139-319 Ubuntu gloss block 121
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4
      - name: Install xattr tooling
        run: sudo apt-get update && sudo apt-get install -y attr
      - name: Load block 121 and run banish
        run: |
          set +e
          ulimit -c unlimited || true
          (
            set -e
            . spells/.imps/sys/invoke-wizardry
            gloss_dir=$(mktemp -d /tmp/wizardry-gloss-blocks.XXXXXX)
            gloss_file=$(mktemp /tmp/wizardry-gloss.XXXXXX)
            generate-glosses --output "$gloss_file"

            awk_program=$(printf '%s\n' \
              'BEGIN { idx=0; out="" }' \
              '/^# First-word gloss/ {' \
              '  idx++' \
              '  out=sprintf("%s/block-%03d.sh", outdir, idx)' \
              '  print "# block " idx > out' \
              '}' \
              '{ if (out != "") print >> out }' \
              'END { printf "%d\n", idx > outdir "/count" }')
            awk -v outdir="$gloss_dir" "$awk_program" "$gloss_file"

            block="$gloss_dir/block-121.sh"
            if [ ! -s "$block" ]; then
              printf "%s\n" "[gloss-test] missing block 121" >&2
              exit 1
            fi
            . "$block"
            banish 8 --only --no-tests --no-heal
          )
          status=$?
          if [ "$status" -eq 139 ]; then
            printf '%s\n' "subshell banish exited with code 139 (SIGSEGV)"
            printf '%s\n' "Last 50 dmesg lines (if available):"
            dmesg | tail -n 50 || true
          fi
          exit "$status"

  block-122:
    name: 139-320 Ubuntu gloss block 122
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4
      - name: Install xattr tooling
        run: sudo apt-get update && sudo apt-get install -y attr
      - name: Load block 122 and run banish
        run: |
          set +e
          ulimit -c unlimited || true
          (
            set -e
            . spells/.imps/sys/invoke-wizardry
            gloss_dir=$(mktemp -d /tmp/wizardry-gloss-blocks.XXXXXX)
            gloss_file=$(mktemp /tmp/wizardry-gloss.XXXXXX)
            generate-glosses --output "$gloss_file"

            awk_program=$(printf '%s\n' \
              'BEGIN { idx=0; out="" }' \
              '/^# First-word gloss/ {' \
              '  idx++' \
              '  out=sprintf("%s/block-%03d.sh", outdir, idx)' \
              '  print "# block " idx > out' \
              '}' \
              '{ if (out != "") print >> out }' \
              'END { printf "%d\n", idx > outdir "/count" }')
            awk -v outdir="$gloss_dir" "$awk_program" "$gloss_file"

            block="$gloss_dir/block-122.sh"
            if [ ! -s "$block" ]; then
              printf "%s\n" "[gloss-test] missing block 122" >&2
              exit 1
            fi
            . "$block"
            banish 8 --only --no-tests --no-heal
          )
          status=$?
          if [ "$status" -eq 139 ]; then
            printf '%s\n' "subshell banish exited with code 139 (SIGSEGV)"
            printf '%s\n' "Last 50 dmesg lines (if available):"
            dmesg | tail -n 50 || true
          fi
          exit "$status"

  block-123:
    name: 139-321 Ubuntu gloss block 123
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4
      - name: Install xattr tooling
        run: sudo apt-get update && sudo apt-get install -y attr
      - name: Load block 123 and run banish
        run: |
          set +e
          ulimit -c unlimited || true
          (
            set -e
            . spells/.imps/sys/invoke-wizardry
            gloss_dir=$(mktemp -d /tmp/wizardry-gloss-blocks.XXXXXX)
            gloss_file=$(mktemp /tmp/wizardry-gloss.XXXXXX)
            generate-glosses --output "$gloss_file"

            awk_program=$(printf '%s\n' \
              'BEGIN { idx=0; out="" }' \
              '/^# First-word gloss/ {' \
              '  idx++' \
              '  out=sprintf("%s/block-%03d.sh", outdir, idx)' \
              '  print "# block " idx > out' \
              '}' \
              '{ if (out != "") print >> out }' \
              'END { printf "%d\n", idx > outdir "/count" }')
            awk -v outdir="$gloss_dir" "$awk_program" "$gloss_file"

            block="$gloss_dir/block-123.sh"
            if [ ! -s "$block" ]; then
              printf "%s\n" "[gloss-test] missing block 123" >&2
              exit 1
            fi
            . "$block"
            banish 8 --only --no-tests --no-heal
          )
          status=$?
          if [ "$status" -eq 139 ]; then
            printf '%s\n' "subshell banish exited with code 139 (SIGSEGV)"
            printf '%s\n' "Last 50 dmesg lines (if available):"
            dmesg | tail -n 50 || true
          fi
          exit "$status"

  block-124:
    name: 139-322 Ubuntu gloss block 124
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4
      - name: Install xattr tooling
        run: sudo apt-get update && sudo apt-get install -y attr
      - name: Load block 124 and run banish
        run: |
          set +e
          ulimit -c unlimited || true
          (
            set -e
            . spells/.imps/sys/invoke-wizardry
            gloss_dir=$(mktemp -d /tmp/wizardry-gloss-blocks.XXXXXX)
            gloss_file=$(mktemp /tmp/wizardry-gloss.XXXXXX)
            generate-glosses --output "$gloss_file"

            awk_program=$(printf '%s\n' \
              'BEGIN { idx=0; out="" }' \
              '/^# First-word gloss/ {' \
              '  idx++' \
              '  out=sprintf("%s/block-%03d.sh", outdir, idx)' \
              '  print "# block " idx > out' \
              '}' \
              '{ if (out != "") print >> out }' \
              'END { printf "%d\n", idx > outdir "/count" }')
            awk -v outdir="$gloss_dir" "$awk_program" "$gloss_file"

            block="$gloss_dir/block-124.sh"
            if [ ! -s "$block" ]; then
              printf "%s\n" "[gloss-test] missing block 124" >&2
              exit 1
            fi
            . "$block"
            banish 8 --only --no-tests --no-heal
          )
          status=$?
          if [ "$status" -eq 139 ]; then
            printf '%s\n' "subshell banish exited with code 139 (SIGSEGV)"
            printf '%s\n' "Last 50 dmesg lines (if available):"
            dmesg | tail -n 50 || true
          fi
          exit "$status"

  block-125:
    name: 139-323 Ubuntu gloss block 125
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4
      - name: Install xattr tooling
        run: sudo apt-get update && sudo apt-get install -y attr
      - name: Load block 125 and run banish
        run: |
          set +e
          ulimit -c unlimited || true
          (
            set -e
            . spells/.imps/sys/invoke-wizardry
            gloss_dir=$(mktemp -d /tmp/wizardry-gloss-blocks.XXXXXX)
            gloss_file=$(mktemp /tmp/wizardry-gloss.XXXXXX)
            generate-glosses --output "$gloss_file"

            awk_program=$(printf '%s\n' \
              'BEGIN { idx=0; out="" }' \
              '/^# First-word gloss/ {' \
              '  idx++' \
              '  out=sprintf("%s/block-%03d.sh", outdir, idx)' \
              '  print "# block " idx > out' \
              '}' \
              '{ if (out != "") print >> out }' \
              'END { printf "%d\n", idx > outdir "/count" }')
            awk -v outdir="$gloss_dir" "$awk_program" "$gloss_file"

            block="$gloss_dir/block-125.sh"
            if [ ! -s "$block" ]; then
              printf "%s\n" "[gloss-test] missing block 125" >&2
              exit 1
            fi
            . "$block"
            banish 8 --only --no-tests --no-heal
          )
          status=$?
          if [ "$status" -eq 139 ]; then
            printf '%s\n' "subshell banish exited with code 139 (SIGSEGV)"
            printf '%s\n' "Last 50 dmesg lines (if available):"
            dmesg | tail -n 50 || true
          fi
          exit "$status"

  block-126:
    name: 139-324 Ubuntu gloss block 126
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4
      - name: Install xattr tooling
        run: sudo apt-get update && sudo apt-get install -y attr
      - name: Load block 126 and run banish
        run: |
          set +e
          ulimit -c unlimited || true
          (
            set -e
            . spells/.imps/sys/invoke-wizardry
            gloss_dir=$(mktemp -d /tmp/wizardry-gloss-blocks.XXXXXX)
            gloss_file=$(mktemp /tmp/wizardry-gloss.XXXXXX)
            generate-glosses --output "$gloss_file"

            awk_program=$(printf '%s\n' \
              'BEGIN { idx=0; out="" }' \
              '/^# First-word gloss/ {' \
              '  idx++' \
              '  out=sprintf("%s/block-%03d.sh", outdir, idx)' \
              '  print "# block " idx > out' \
              '}' \
              '{ if (out != "") print >> out }' \
              'END { printf "%d\n", idx > outdir "/count" }')
            awk -v outdir="$gloss_dir" "$awk_program" "$gloss_file"

            block="$gloss_dir/block-126.sh"
            if [ ! -s "$block" ]; then
              printf "%s\n" "[gloss-test] missing block 126" >&2
              exit 1
            fi
            . "$block"
            banish 8 --only --no-tests --no-heal
          )
          status=$?
          if [ "$status" -eq 139 ]; then
            printf '%s\n' "subshell banish exited with code 139 (SIGSEGV)"
            printf '%s\n' "Last 50 dmesg lines (if available):"
            dmesg | tail -n 50 || true
          fi
          exit "$status"
