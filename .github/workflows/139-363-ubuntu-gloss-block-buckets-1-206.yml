name: 139-363 Ubuntu gloss block buckets 1-206

on:
  pull_request:
    types: [opened, synchronize, reopened]

concurrency:
  group: 139-363-${{ github.event.pull_request.number }}
  cancel-in-progress: true

jobs:
  job-139-363-1-10:
    name: "139-363 blocks 1-10"
    runs-on: ubuntu-latest
    timeout-minutes: 60
    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: Install attr
        run: |
          sudo apt-get update
          sudo apt-get install -y attr

      - name: Run blocks 1-10
        shell: bash
        run: |
          set -euo pipefail
          export WIZARDRY_DIR="$GITHUB_WORKSPACE"
          . "$WIZARDRY_DIR/spells/.imps/sys/invoke-wizardry"
          gloss_dir=$(mktemp -d /tmp/wizardry-gloss-blocks.XXXXXX)
          gloss_file=$(mktemp /tmp/wizardry-gloss.XXXXXX)
          "$WIZARDRY_DIR/spells/.wizardry/generate-glosses" --output "$gloss_file"
          awk_program=$(printf '%s\n' \
            'BEGIN { idx=0; out="" }' \
            '/^# First-word gloss/ {' \
            '  idx++' \
            '  out=sprintf("%s/block-%03d.sh", outdir, idx)' \
            '  print "# block " idx > out' \
            '}' \
            '{ if (out != "") print >> out }' \
            'END { printf "%d\n", idx > outdir "/count" }')
          awk -v outdir="$gloss_dir" "$awk_program" "$gloss_file"
          total=$(cat "$gloss_dir/count")
          start=1
          end=10
          if [ "$start" -gt "$total" ]; then
            printf '%s\n' "range 1-10 beyond total $total; skipping"
            exit 0
          fi
          if [ "$end" -gt "$total" ]; then
            end=$total
          fi
          for idx in $(seq "$start" "$end"); do
            block="$gloss_dir/block-$(printf '%03d' "$idx").sh"
            if [ ! -s "$block" ]; then
              printf '%s\n' "missing block $idx" >&2
              exit 1
            fi
            . "$block"
          done
          set +e
          ( banish 8 --only --no-tests --no-heal )
          status=$?
          if [ "$status" -eq 139 ]; then
            printf '%s\n' "subshell banish exited with code 139 (SIGSEGV)"
            printf '%s\n' "Last 50 dmesg lines (if available):"
            dmesg | tail -n 50 || true
          fi
          exit "$status"

  job-139-363-11-20:
    name: "139-363 blocks 11-20"
    runs-on: ubuntu-latest
    timeout-minutes: 60
    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: Install attr
        run: |
          sudo apt-get update
          sudo apt-get install -y attr

      - name: Run blocks 11-20
        shell: bash
        run: |
          set -euo pipefail
          export WIZARDRY_DIR="$GITHUB_WORKSPACE"
          . "$WIZARDRY_DIR/spells/.imps/sys/invoke-wizardry"
          gloss_dir=$(mktemp -d /tmp/wizardry-gloss-blocks.XXXXXX)
          gloss_file=$(mktemp /tmp/wizardry-gloss.XXXXXX)
          "$WIZARDRY_DIR/spells/.wizardry/generate-glosses" --output "$gloss_file"
          awk_program=$(printf '%s\n' \
            'BEGIN { idx=0; out="" }' \
            '/^# First-word gloss/ {' \
            '  idx++' \
            '  out=sprintf("%s/block-%03d.sh", outdir, idx)' \
            '  print "# block " idx > out' \
            '}' \
            '{ if (out != "") print >> out }' \
            'END { printf "%d\n", idx > outdir "/count" }')
          awk -v outdir="$gloss_dir" "$awk_program" "$gloss_file"
          total=$(cat "$gloss_dir/count")
          start=11
          end=20
          if [ "$start" -gt "$total" ]; then
            printf '%s\n' "range 11-20 beyond total $total; skipping"
            exit 0
          fi
          if [ "$end" -gt "$total" ]; then
            end=$total
          fi
          for idx in $(seq "$start" "$end"); do
            block="$gloss_dir/block-$(printf '%03d' "$idx").sh"
            if [ ! -s "$block" ]; then
              printf '%s\n' "missing block $idx" >&2
              exit 1
            fi
            . "$block"
          done
          set +e
          ( banish 8 --only --no-tests --no-heal )
          status=$?
          if [ "$status" -eq 139 ]; then
            printf '%s\n' "subshell banish exited with code 139 (SIGSEGV)"
            printf '%s\n' "Last 50 dmesg lines (if available):"
            dmesg | tail -n 50 || true
          fi
          exit "$status"

  job-139-363-21-30:
    name: "139-363 blocks 21-30"
    runs-on: ubuntu-latest
    timeout-minutes: 60
    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: Install attr
        run: |
          sudo apt-get update
          sudo apt-get install -y attr

      - name: Run blocks 21-30
        shell: bash
        run: |
          set -euo pipefail
          export WIZARDRY_DIR="$GITHUB_WORKSPACE"
          . "$WIZARDRY_DIR/spells/.imps/sys/invoke-wizardry"
          gloss_dir=$(mktemp -d /tmp/wizardry-gloss-blocks.XXXXXX)
          gloss_file=$(mktemp /tmp/wizardry-gloss.XXXXXX)
          "$WIZARDRY_DIR/spells/.wizardry/generate-glosses" --output "$gloss_file"
          awk_program=$(printf '%s\n' \
            'BEGIN { idx=0; out="" }' \
            '/^# First-word gloss/ {' \
            '  idx++' \
            '  out=sprintf("%s/block-%03d.sh", outdir, idx)' \
            '  print "# block " idx > out' \
            '}' \
            '{ if (out != "") print >> out }' \
            'END { printf "%d\n", idx > outdir "/count" }')
          awk -v outdir="$gloss_dir" "$awk_program" "$gloss_file"
          total=$(cat "$gloss_dir/count")
          start=21
          end=30
          if [ "$start" -gt "$total" ]; then
            printf '%s\n' "range 21-30 beyond total $total; skipping"
            exit 0
          fi
          if [ "$end" -gt "$total" ]; then
            end=$total
          fi
          for idx in $(seq "$start" "$end"); do
            block="$gloss_dir/block-$(printf '%03d' "$idx").sh"
            if [ ! -s "$block" ]; then
              printf '%s\n' "missing block $idx" >&2
              exit 1
            fi
            . "$block"
          done
          set +e
          ( banish 8 --only --no-tests --no-heal )
          status=$?
          if [ "$status" -eq 139 ]; then
            printf '%s\n' "subshell banish exited with code 139 (SIGSEGV)"
            printf '%s\n' "Last 50 dmesg lines (if available):"
            dmesg | tail -n 50 || true
          fi
          exit "$status"

  job-139-363-31-40:
    name: "139-363 blocks 31-40"
    runs-on: ubuntu-latest
    timeout-minutes: 60
    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: Install attr
        run: |
          sudo apt-get update
          sudo apt-get install -y attr

      - name: Run blocks 31-40
        shell: bash
        run: |
          set -euo pipefail
          export WIZARDRY_DIR="$GITHUB_WORKSPACE"
          . "$WIZARDRY_DIR/spells/.imps/sys/invoke-wizardry"
          gloss_dir=$(mktemp -d /tmp/wizardry-gloss-blocks.XXXXXX)
          gloss_file=$(mktemp /tmp/wizardry-gloss.XXXXXX)
          "$WIZARDRY_DIR/spells/.wizardry/generate-glosses" --output "$gloss_file"
          awk_program=$(printf '%s\n' \
            'BEGIN { idx=0; out="" }' \
            '/^# First-word gloss/ {' \
            '  idx++' \
            '  out=sprintf("%s/block-%03d.sh", outdir, idx)' \
            '  print "# block " idx > out' \
            '}' \
            '{ if (out != "") print >> out }' \
            'END { printf "%d\n", idx > outdir "/count" }')
          awk -v outdir="$gloss_dir" "$awk_program" "$gloss_file"
          total=$(cat "$gloss_dir/count")
          start=31
          end=40
          if [ "$start" -gt "$total" ]; then
            printf '%s\n' "range 31-40 beyond total $total; skipping"
            exit 0
          fi
          if [ "$end" -gt "$total" ]; then
            end=$total
          fi
          for idx in $(seq "$start" "$end"); do
            block="$gloss_dir/block-$(printf '%03d' "$idx").sh"
            if [ ! -s "$block" ]; then
              printf '%s\n' "missing block $idx" >&2
              exit 1
            fi
            . "$block"
          done
          set +e
          ( banish 8 --only --no-tests --no-heal )
          status=$?
          if [ "$status" -eq 139 ]; then
            printf '%s\n' "subshell banish exited with code 139 (SIGSEGV)"
            printf '%s\n' "Last 50 dmesg lines (if available):"
            dmesg | tail -n 50 || true
          fi
          exit "$status"

  job-139-363-41-50:
    name: "139-363 blocks 41-50"
    runs-on: ubuntu-latest
    timeout-minutes: 60
    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: Install attr
        run: |
          sudo apt-get update
          sudo apt-get install -y attr

      - name: Run blocks 41-50
        shell: bash
        run: |
          set -euo pipefail
          export WIZARDRY_DIR="$GITHUB_WORKSPACE"
          . "$WIZARDRY_DIR/spells/.imps/sys/invoke-wizardry"
          gloss_dir=$(mktemp -d /tmp/wizardry-gloss-blocks.XXXXXX)
          gloss_file=$(mktemp /tmp/wizardry-gloss.XXXXXX)
          "$WIZARDRY_DIR/spells/.wizardry/generate-glosses" --output "$gloss_file"
          awk_program=$(printf '%s\n' \
            'BEGIN { idx=0; out="" }' \
            '/^# First-word gloss/ {' \
            '  idx++' \
            '  out=sprintf("%s/block-%03d.sh", outdir, idx)' \
            '  print "# block " idx > out' \
            '}' \
            '{ if (out != "") print >> out }' \
            'END { printf "%d\n", idx > outdir "/count" }')
          awk -v outdir="$gloss_dir" "$awk_program" "$gloss_file"
          total=$(cat "$gloss_dir/count")
          start=41
          end=50
          if [ "$start" -gt "$total" ]; then
            printf '%s\n' "range 41-50 beyond total $total; skipping"
            exit 0
          fi
          if [ "$end" -gt "$total" ]; then
            end=$total
          fi
          for idx in $(seq "$start" "$end"); do
            block="$gloss_dir/block-$(printf '%03d' "$idx").sh"
            if [ ! -s "$block" ]; then
              printf '%s\n' "missing block $idx" >&2
              exit 1
            fi
            . "$block"
          done
          set +e
          ( banish 8 --only --no-tests --no-heal )
          status=$?
          if [ "$status" -eq 139 ]; then
            printf '%s\n' "subshell banish exited with code 139 (SIGSEGV)"
            printf '%s\n' "Last 50 dmesg lines (if available):"
            dmesg | tail -n 50 || true
          fi
          exit "$status"

  job-139-363-51-60:
    name: "139-363 blocks 51-60"
    runs-on: ubuntu-latest
    timeout-minutes: 60
    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: Install attr
        run: |
          sudo apt-get update
          sudo apt-get install -y attr

      - name: Run blocks 51-60
        shell: bash
        run: |
          set -euo pipefail
          export WIZARDRY_DIR="$GITHUB_WORKSPACE"
          . "$WIZARDRY_DIR/spells/.imps/sys/invoke-wizardry"
          gloss_dir=$(mktemp -d /tmp/wizardry-gloss-blocks.XXXXXX)
          gloss_file=$(mktemp /tmp/wizardry-gloss.XXXXXX)
          "$WIZARDRY_DIR/spells/.wizardry/generate-glosses" --output "$gloss_file"
          awk_program=$(printf '%s\n' \
            'BEGIN { idx=0; out="" }' \
            '/^# First-word gloss/ {' \
            '  idx++' \
            '  out=sprintf("%s/block-%03d.sh", outdir, idx)' \
            '  print "# block " idx > out' \
            '}' \
            '{ if (out != "") print >> out }' \
            'END { printf "%d\n", idx > outdir "/count" }')
          awk -v outdir="$gloss_dir" "$awk_program" "$gloss_file"
          total=$(cat "$gloss_dir/count")
          start=51
          end=60
          if [ "$start" -gt "$total" ]; then
            printf '%s\n' "range 51-60 beyond total $total; skipping"
            exit 0
          fi
          if [ "$end" -gt "$total" ]; then
            end=$total
          fi
          for idx in $(seq "$start" "$end"); do
            block="$gloss_dir/block-$(printf '%03d' "$idx").sh"
            if [ ! -s "$block" ]; then
              printf '%s\n' "missing block $idx" >&2
              exit 1
            fi
            . "$block"
          done
          set +e
          ( banish 8 --only --no-tests --no-heal )
          status=$?
          if [ "$status" -eq 139 ]; then
            printf '%s\n' "subshell banish exited with code 139 (SIGSEGV)"
            printf '%s\n' "Last 50 dmesg lines (if available):"
            dmesg | tail -n 50 || true
          fi
          exit "$status"

  job-139-363-61-70:
    name: "139-363 blocks 61-70"
    runs-on: ubuntu-latest
    timeout-minutes: 60
    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: Install attr
        run: |
          sudo apt-get update
          sudo apt-get install -y attr

      - name: Run blocks 61-70
        shell: bash
        run: |
          set -euo pipefail
          export WIZARDRY_DIR="$GITHUB_WORKSPACE"
          . "$WIZARDRY_DIR/spells/.imps/sys/invoke-wizardry"
          gloss_dir=$(mktemp -d /tmp/wizardry-gloss-blocks.XXXXXX)
          gloss_file=$(mktemp /tmp/wizardry-gloss.XXXXXX)
          "$WIZARDRY_DIR/spells/.wizardry/generate-glosses" --output "$gloss_file"
          awk_program=$(printf '%s\n' \
            'BEGIN { idx=0; out="" }' \
            '/^# First-word gloss/ {' \
            '  idx++' \
            '  out=sprintf("%s/block-%03d.sh", outdir, idx)' \
            '  print "# block " idx > out' \
            '}' \
            '{ if (out != "") print >> out }' \
            'END { printf "%d\n", idx > outdir "/count" }')
          awk -v outdir="$gloss_dir" "$awk_program" "$gloss_file"
          total=$(cat "$gloss_dir/count")
          start=61
          end=70
          if [ "$start" -gt "$total" ]; then
            printf '%s\n' "range 61-70 beyond total $total; skipping"
            exit 0
          fi
          if [ "$end" -gt "$total" ]; then
            end=$total
          fi
          for idx in $(seq "$start" "$end"); do
            block="$gloss_dir/block-$(printf '%03d' "$idx").sh"
            if [ ! -s "$block" ]; then
              printf '%s\n' "missing block $idx" >&2
              exit 1
            fi
            . "$block"
          done
          set +e
          ( banish 8 --only --no-tests --no-heal )
          status=$?
          if [ "$status" -eq 139 ]; then
            printf '%s\n' "subshell banish exited with code 139 (SIGSEGV)"
            printf '%s\n' "Last 50 dmesg lines (if available):"
            dmesg | tail -n 50 || true
          fi
          exit "$status"

  job-139-363-71-80:
    name: "139-363 blocks 71-80"
    runs-on: ubuntu-latest
    timeout-minutes: 60
    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: Install attr
        run: |
          sudo apt-get update
          sudo apt-get install -y attr

      - name: Run blocks 71-80
        shell: bash
        run: |
          set -euo pipefail
          export WIZARDRY_DIR="$GITHUB_WORKSPACE"
          . "$WIZARDRY_DIR/spells/.imps/sys/invoke-wizardry"
          gloss_dir=$(mktemp -d /tmp/wizardry-gloss-blocks.XXXXXX)
          gloss_file=$(mktemp /tmp/wizardry-gloss.XXXXXX)
          "$WIZARDRY_DIR/spells/.wizardry/generate-glosses" --output "$gloss_file"
          awk_program=$(printf '%s\n' \
            'BEGIN { idx=0; out="" }' \
            '/^# First-word gloss/ {' \
            '  idx++' \
            '  out=sprintf("%s/block-%03d.sh", outdir, idx)' \
            '  print "# block " idx > out' \
            '}' \
            '{ if (out != "") print >> out }' \
            'END { printf "%d\n", idx > outdir "/count" }')
          awk -v outdir="$gloss_dir" "$awk_program" "$gloss_file"
          total=$(cat "$gloss_dir/count")
          start=71
          end=80
          if [ "$start" -gt "$total" ]; then
            printf '%s\n' "range 71-80 beyond total $total; skipping"
            exit 0
          fi
          if [ "$end" -gt "$total" ]; then
            end=$total
          fi
          for idx in $(seq "$start" "$end"); do
            block="$gloss_dir/block-$(printf '%03d' "$idx").sh"
            if [ ! -s "$block" ]; then
              printf '%s\n' "missing block $idx" >&2
              exit 1
            fi
            . "$block"
          done
          set +e
          ( banish 8 --only --no-tests --no-heal )
          status=$?
          if [ "$status" -eq 139 ]; then
            printf '%s\n' "subshell banish exited with code 139 (SIGSEGV)"
            printf '%s\n' "Last 50 dmesg lines (if available):"
            dmesg | tail -n 50 || true
          fi
          exit "$status"

  job-139-363-81-90:
    name: "139-363 blocks 81-90"
    runs-on: ubuntu-latest
    timeout-minutes: 60
    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: Install attr
        run: |
          sudo apt-get update
          sudo apt-get install -y attr

      - name: Run blocks 81-90
        shell: bash
        run: |
          set -euo pipefail
          export WIZARDRY_DIR="$GITHUB_WORKSPACE"
          . "$WIZARDRY_DIR/spells/.imps/sys/invoke-wizardry"
          gloss_dir=$(mktemp -d /tmp/wizardry-gloss-blocks.XXXXXX)
          gloss_file=$(mktemp /tmp/wizardry-gloss.XXXXXX)
          "$WIZARDRY_DIR/spells/.wizardry/generate-glosses" --output "$gloss_file"
          awk_program=$(printf '%s\n' \
            'BEGIN { idx=0; out="" }' \
            '/^# First-word gloss/ {' \
            '  idx++' \
            '  out=sprintf("%s/block-%03d.sh", outdir, idx)' \
            '  print "# block " idx > out' \
            '}' \
            '{ if (out != "") print >> out }' \
            'END { printf "%d\n", idx > outdir "/count" }')
          awk -v outdir="$gloss_dir" "$awk_program" "$gloss_file"
          total=$(cat "$gloss_dir/count")
          start=81
          end=90
          if [ "$start" -gt "$total" ]; then
            printf '%s\n' "range 81-90 beyond total $total; skipping"
            exit 0
          fi
          if [ "$end" -gt "$total" ]; then
            end=$total
          fi
          for idx in $(seq "$start" "$end"); do
            block="$gloss_dir/block-$(printf '%03d' "$idx").sh"
            if [ ! -s "$block" ]; then
              printf '%s\n' "missing block $idx" >&2
              exit 1
            fi
            . "$block"
          done
          set +e
          ( banish 8 --only --no-tests --no-heal )
          status=$?
          if [ "$status" -eq 139 ]; then
            printf '%s\n' "subshell banish exited with code 139 (SIGSEGV)"
            printf '%s\n' "Last 50 dmesg lines (if available):"
            dmesg | tail -n 50 || true
          fi
          exit "$status"

  job-139-363-91-100:
    name: "139-363 blocks 91-100"
    runs-on: ubuntu-latest
    timeout-minutes: 60
    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: Install attr
        run: |
          sudo apt-get update
          sudo apt-get install -y attr

      - name: Run blocks 91-100
        shell: bash
        run: |
          set -euo pipefail
          export WIZARDRY_DIR="$GITHUB_WORKSPACE"
          . "$WIZARDRY_DIR/spells/.imps/sys/invoke-wizardry"
          gloss_dir=$(mktemp -d /tmp/wizardry-gloss-blocks.XXXXXX)
          gloss_file=$(mktemp /tmp/wizardry-gloss.XXXXXX)
          "$WIZARDRY_DIR/spells/.wizardry/generate-glosses" --output "$gloss_file"
          awk_program=$(printf '%s\n' \
            'BEGIN { idx=0; out="" }' \
            '/^# First-word gloss/ {' \
            '  idx++' \
            '  out=sprintf("%s/block-%03d.sh", outdir, idx)' \
            '  print "# block " idx > out' \
            '}' \
            '{ if (out != "") print >> out }' \
            'END { printf "%d\n", idx > outdir "/count" }')
          awk -v outdir="$gloss_dir" "$awk_program" "$gloss_file"
          total=$(cat "$gloss_dir/count")
          start=91
          end=100
          if [ "$start" -gt "$total" ]; then
            printf '%s\n' "range 91-100 beyond total $total; skipping"
            exit 0
          fi
          if [ "$end" -gt "$total" ]; then
            end=$total
          fi
          for idx in $(seq "$start" "$end"); do
            block="$gloss_dir/block-$(printf '%03d' "$idx").sh"
            if [ ! -s "$block" ]; then
              printf '%s\n' "missing block $idx" >&2
              exit 1
            fi
            . "$block"
          done
          set +e
          ( banish 8 --only --no-tests --no-heal )
          status=$?
          if [ "$status" -eq 139 ]; then
            printf '%s\n' "subshell banish exited with code 139 (SIGSEGV)"
            printf '%s\n' "Last 50 dmesg lines (if available):"
            dmesg | tail -n 50 || true
          fi
          exit "$status"

  job-139-363-101-110:
    name: "139-363 blocks 101-110"
    runs-on: ubuntu-latest
    timeout-minutes: 60
    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: Install attr
        run: |
          sudo apt-get update
          sudo apt-get install -y attr

      - name: Run blocks 101-110
        shell: bash
        run: |
          set -euo pipefail
          export WIZARDRY_DIR="$GITHUB_WORKSPACE"
          . "$WIZARDRY_DIR/spells/.imps/sys/invoke-wizardry"
          gloss_dir=$(mktemp -d /tmp/wizardry-gloss-blocks.XXXXXX)
          gloss_file=$(mktemp /tmp/wizardry-gloss.XXXXXX)
          "$WIZARDRY_DIR/spells/.wizardry/generate-glosses" --output "$gloss_file"
          awk_program=$(printf '%s\n' \
            'BEGIN { idx=0; out="" }' \
            '/^# First-word gloss/ {' \
            '  idx++' \
            '  out=sprintf("%s/block-%03d.sh", outdir, idx)' \
            '  print "# block " idx > out' \
            '}' \
            '{ if (out != "") print >> out }' \
            'END { printf "%d\n", idx > outdir "/count" }')
          awk -v outdir="$gloss_dir" "$awk_program" "$gloss_file"
          total=$(cat "$gloss_dir/count")
          start=101
          end=110
          if [ "$start" -gt "$total" ]; then
            printf '%s\n' "range 101-110 beyond total $total; skipping"
            exit 0
          fi
          if [ "$end" -gt "$total" ]; then
            end=$total
          fi
          for idx in $(seq "$start" "$end"); do
            block="$gloss_dir/block-$(printf '%03d' "$idx").sh"
            if [ ! -s "$block" ]; then
              printf '%s\n' "missing block $idx" >&2
              exit 1
            fi
            . "$block"
          done
          set +e
          ( banish 8 --only --no-tests --no-heal )
          status=$?
          if [ "$status" -eq 139 ]; then
            printf '%s\n' "subshell banish exited with code 139 (SIGSEGV)"
            printf '%s\n' "Last 50 dmesg lines (if available):"
            dmesg | tail -n 50 || true
          fi
          exit "$status"

  job-139-363-111-120:
    name: "139-363 blocks 111-120"
    runs-on: ubuntu-latest
    timeout-minutes: 60
    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: Install attr
        run: |
          sudo apt-get update
          sudo apt-get install -y attr

      - name: Run blocks 111-120
        shell: bash
        run: |
          set -euo pipefail
          export WIZARDRY_DIR="$GITHUB_WORKSPACE"
          . "$WIZARDRY_DIR/spells/.imps/sys/invoke-wizardry"
          gloss_dir=$(mktemp -d /tmp/wizardry-gloss-blocks.XXXXXX)
          gloss_file=$(mktemp /tmp/wizardry-gloss.XXXXXX)
          "$WIZARDRY_DIR/spells/.wizardry/generate-glosses" --output "$gloss_file"
          awk_program=$(printf '%s\n' \
            'BEGIN { idx=0; out="" }' \
            '/^# First-word gloss/ {' \
            '  idx++' \
            '  out=sprintf("%s/block-%03d.sh", outdir, idx)' \
            '  print "# block " idx > out' \
            '}' \
            '{ if (out != "") print >> out }' \
            'END { printf "%d\n", idx > outdir "/count" }')
          awk -v outdir="$gloss_dir" "$awk_program" "$gloss_file"
          total=$(cat "$gloss_dir/count")
          start=111
          end=120
          if [ "$start" -gt "$total" ]; then
            printf '%s\n' "range 111-120 beyond total $total; skipping"
            exit 0
          fi
          if [ "$end" -gt "$total" ]; then
            end=$total
          fi
          for idx in $(seq "$start" "$end"); do
            block="$gloss_dir/block-$(printf '%03d' "$idx").sh"
            if [ ! -s "$block" ]; then
              printf '%s\n' "missing block $idx" >&2
              exit 1
            fi
            . "$block"
          done
          set +e
          ( banish 8 --only --no-tests --no-heal )
          status=$?
          if [ "$status" -eq 139 ]; then
            printf '%s\n' "subshell banish exited with code 139 (SIGSEGV)"
            printf '%s\n' "Last 50 dmesg lines (if available):"
            dmesg | tail -n 50 || true
          fi
          exit "$status"

  job-139-363-121-130:
    name: "139-363 blocks 121-130"
    runs-on: ubuntu-latest
    timeout-minutes: 60
    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: Install attr
        run: |
          sudo apt-get update
          sudo apt-get install -y attr

      - name: Run blocks 121-130
        shell: bash
        run: |
          set -euo pipefail
          export WIZARDRY_DIR="$GITHUB_WORKSPACE"
          . "$WIZARDRY_DIR/spells/.imps/sys/invoke-wizardry"
          gloss_dir=$(mktemp -d /tmp/wizardry-gloss-blocks.XXXXXX)
          gloss_file=$(mktemp /tmp/wizardry-gloss.XXXXXX)
          "$WIZARDRY_DIR/spells/.wizardry/generate-glosses" --output "$gloss_file"
          awk_program=$(printf '%s\n' \
            'BEGIN { idx=0; out="" }' \
            '/^# First-word gloss/ {' \
            '  idx++' \
            '  out=sprintf("%s/block-%03d.sh", outdir, idx)' \
            '  print "# block " idx > out' \
            '}' \
            '{ if (out != "") print >> out }' \
            'END { printf "%d\n", idx > outdir "/count" }')
          awk -v outdir="$gloss_dir" "$awk_program" "$gloss_file"
          total=$(cat "$gloss_dir/count")
          start=121
          end=130
          if [ "$start" -gt "$total" ]; then
            printf '%s\n' "range 121-130 beyond total $total; skipping"
            exit 0
          fi
          if [ "$end" -gt "$total" ]; then
            end=$total
          fi
          for idx in $(seq "$start" "$end"); do
            block="$gloss_dir/block-$(printf '%03d' "$idx").sh"
            if [ ! -s "$block" ]; then
              printf '%s\n' "missing block $idx" >&2
              exit 1
            fi
            . "$block"
          done
          set +e
          ( banish 8 --only --no-tests --no-heal )
          status=$?
          if [ "$status" -eq 139 ]; then
            printf '%s\n' "subshell banish exited with code 139 (SIGSEGV)"
            printf '%s\n' "Last 50 dmesg lines (if available):"
            dmesg | tail -n 50 || true
          fi
          exit "$status"

  job-139-363-131-140:
    name: "139-363 blocks 131-140"
    runs-on: ubuntu-latest
    timeout-minutes: 60
    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: Install attr
        run: |
          sudo apt-get update
          sudo apt-get install -y attr

      - name: Run blocks 131-140
        shell: bash
        run: |
          set -euo pipefail
          export WIZARDRY_DIR="$GITHUB_WORKSPACE"
          . "$WIZARDRY_DIR/spells/.imps/sys/invoke-wizardry"
          gloss_dir=$(mktemp -d /tmp/wizardry-gloss-blocks.XXXXXX)
          gloss_file=$(mktemp /tmp/wizardry-gloss.XXXXXX)
          "$WIZARDRY_DIR/spells/.wizardry/generate-glosses" --output "$gloss_file"
          awk_program=$(printf '%s\n' \
            'BEGIN { idx=0; out="" }' \
            '/^# First-word gloss/ {' \
            '  idx++' \
            '  out=sprintf("%s/block-%03d.sh", outdir, idx)' \
            '  print "# block " idx > out' \
            '}' \
            '{ if (out != "") print >> out }' \
            'END { printf "%d\n", idx > outdir "/count" }')
          awk -v outdir="$gloss_dir" "$awk_program" "$gloss_file"
          total=$(cat "$gloss_dir/count")
          start=131
          end=140
          if [ "$start" -gt "$total" ]; then
            printf '%s\n' "range 131-140 beyond total $total; skipping"
            exit 0
          fi
          if [ "$end" -gt "$total" ]; then
            end=$total
          fi
          for idx in $(seq "$start" "$end"); do
            block="$gloss_dir/block-$(printf '%03d' "$idx").sh"
            if [ ! -s "$block" ]; then
              printf '%s\n' "missing block $idx" >&2
              exit 1
            fi
            . "$block"
          done
          set +e
          ( banish 8 --only --no-tests --no-heal )
          status=$?
          if [ "$status" -eq 139 ]; then
            printf '%s\n' "subshell banish exited with code 139 (SIGSEGV)"
            printf '%s\n' "Last 50 dmesg lines (if available):"
            dmesg | tail -n 50 || true
          fi
          exit "$status"

  job-139-363-141-150:
    name: "139-363 blocks 141-150"
    runs-on: ubuntu-latest
    timeout-minutes: 60
    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: Install attr
        run: |
          sudo apt-get update
          sudo apt-get install -y attr

      - name: Run blocks 141-150
        shell: bash
        run: |
          set -euo pipefail
          export WIZARDRY_DIR="$GITHUB_WORKSPACE"
          . "$WIZARDRY_DIR/spells/.imps/sys/invoke-wizardry"
          gloss_dir=$(mktemp -d /tmp/wizardry-gloss-blocks.XXXXXX)
          gloss_file=$(mktemp /tmp/wizardry-gloss.XXXXXX)
          "$WIZARDRY_DIR/spells/.wizardry/generate-glosses" --output "$gloss_file"
          awk_program=$(printf '%s\n' \
            'BEGIN { idx=0; out="" }' \
            '/^# First-word gloss/ {' \
            '  idx++' \
            '  out=sprintf("%s/block-%03d.sh", outdir, idx)' \
            '  print "# block " idx > out' \
            '}' \
            '{ if (out != "") print >> out }' \
            'END { printf "%d\n", idx > outdir "/count" }')
          awk -v outdir="$gloss_dir" "$awk_program" "$gloss_file"
          total=$(cat "$gloss_dir/count")
          start=141
          end=150
          if [ "$start" -gt "$total" ]; then
            printf '%s\n' "range 141-150 beyond total $total; skipping"
            exit 0
          fi
          if [ "$end" -gt "$total" ]; then
            end=$total
          fi
          for idx in $(seq "$start" "$end"); do
            block="$gloss_dir/block-$(printf '%03d' "$idx").sh"
            if [ ! -s "$block" ]; then
              printf '%s\n' "missing block $idx" >&2
              exit 1
            fi
            . "$block"
          done
          set +e
          ( banish 8 --only --no-tests --no-heal )
          status=$?
          if [ "$status" -eq 139 ]; then
            printf '%s\n' "subshell banish exited with code 139 (SIGSEGV)"
            printf '%s\n' "Last 50 dmesg lines (if available):"
            dmesg | tail -n 50 || true
          fi
          exit "$status"

  job-139-363-151-160:
    name: "139-363 blocks 151-160"
    runs-on: ubuntu-latest
    timeout-minutes: 60
    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: Install attr
        run: |
          sudo apt-get update
          sudo apt-get install -y attr

      - name: Run blocks 151-160
        shell: bash
        run: |
          set -euo pipefail
          export WIZARDRY_DIR="$GITHUB_WORKSPACE"
          . "$WIZARDRY_DIR/spells/.imps/sys/invoke-wizardry"
          gloss_dir=$(mktemp -d /tmp/wizardry-gloss-blocks.XXXXXX)
          gloss_file=$(mktemp /tmp/wizardry-gloss.XXXXXX)
          "$WIZARDRY_DIR/spells/.wizardry/generate-glosses" --output "$gloss_file"
          awk_program=$(printf '%s\n' \
            'BEGIN { idx=0; out="" }' \
            '/^# First-word gloss/ {' \
            '  idx++' \
            '  out=sprintf("%s/block-%03d.sh", outdir, idx)' \
            '  print "# block " idx > out' \
            '}' \
            '{ if (out != "") print >> out }' \
            'END { printf "%d\n", idx > outdir "/count" }')
          awk -v outdir="$gloss_dir" "$awk_program" "$gloss_file"
          total=$(cat "$gloss_dir/count")
          start=151
          end=160
          if [ "$start" -gt "$total" ]; then
            printf '%s\n' "range 151-160 beyond total $total; skipping"
            exit 0
          fi
          if [ "$end" -gt "$total" ]; then
            end=$total
          fi
          for idx in $(seq "$start" "$end"); do
            block="$gloss_dir/block-$(printf '%03d' "$idx").sh"
            if [ ! -s "$block" ]; then
              printf '%s\n' "missing block $idx" >&2
              exit 1
            fi
            . "$block"
          done
          set +e
          ( banish 8 --only --no-tests --no-heal )
          status=$?
          if [ "$status" -eq 139 ]; then
            printf '%s\n' "subshell banish exited with code 139 (SIGSEGV)"
            printf '%s\n' "Last 50 dmesg lines (if available):"
            dmesg | tail -n 50 || true
          fi
          exit "$status"

  job-139-363-161-170:
    name: "139-363 blocks 161-170"
    runs-on: ubuntu-latest
    timeout-minutes: 60
    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: Install attr
        run: |
          sudo apt-get update
          sudo apt-get install -y attr

      - name: Run blocks 161-170
        shell: bash
        run: |
          set -euo pipefail
          export WIZARDRY_DIR="$GITHUB_WORKSPACE"
          . "$WIZARDRY_DIR/spells/.imps/sys/invoke-wizardry"
          gloss_dir=$(mktemp -d /tmp/wizardry-gloss-blocks.XXXXXX)
          gloss_file=$(mktemp /tmp/wizardry-gloss.XXXXXX)
          "$WIZARDRY_DIR/spells/.wizardry/generate-glosses" --output "$gloss_file"
          awk_program=$(printf '%s\n' \
            'BEGIN { idx=0; out="" }' \
            '/^# First-word gloss/ {' \
            '  idx++' \
            '  out=sprintf("%s/block-%03d.sh", outdir, idx)' \
            '  print "# block " idx > out' \
            '}' \
            '{ if (out != "") print >> out }' \
            'END { printf "%d\n", idx > outdir "/count" }')
          awk -v outdir="$gloss_dir" "$awk_program" "$gloss_file"
          total=$(cat "$gloss_dir/count")
          start=161
          end=170
          if [ "$start" -gt "$total" ]; then
            printf '%s\n' "range 161-170 beyond total $total; skipping"
            exit 0
          fi
          if [ "$end" -gt "$total" ]; then
            end=$total
          fi
          for idx in $(seq "$start" "$end"); do
            block="$gloss_dir/block-$(printf '%03d' "$idx").sh"
            if [ ! -s "$block" ]; then
              printf '%s\n' "missing block $idx" >&2
              exit 1
            fi
            . "$block"
          done
          set +e
          ( banish 8 --only --no-tests --no-heal )
          status=$?
          if [ "$status" -eq 139 ]; then
            printf '%s\n' "subshell banish exited with code 139 (SIGSEGV)"
            printf '%s\n' "Last 50 dmesg lines (if available):"
            dmesg | tail -n 50 || true
          fi
          exit "$status"

  job-139-363-171-180:
    name: "139-363 blocks 171-180"
    runs-on: ubuntu-latest
    timeout-minutes: 60
    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: Install attr
        run: |
          sudo apt-get update
          sudo apt-get install -y attr

      - name: Run blocks 171-180
        shell: bash
        run: |
          set -euo pipefail
          export WIZARDRY_DIR="$GITHUB_WORKSPACE"
          . "$WIZARDRY_DIR/spells/.imps/sys/invoke-wizardry"
          gloss_dir=$(mktemp -d /tmp/wizardry-gloss-blocks.XXXXXX)
          gloss_file=$(mktemp /tmp/wizardry-gloss.XXXXXX)
          "$WIZARDRY_DIR/spells/.wizardry/generate-glosses" --output "$gloss_file"
          awk_program=$(printf '%s\n' \
            'BEGIN { idx=0; out="" }' \
            '/^# First-word gloss/ {' \
            '  idx++' \
            '  out=sprintf("%s/block-%03d.sh", outdir, idx)' \
            '  print "# block " idx > out' \
            '}' \
            '{ if (out != "") print >> out }' \
            'END { printf "%d\n", idx > outdir "/count" }')
          awk -v outdir="$gloss_dir" "$awk_program" "$gloss_file"
          total=$(cat "$gloss_dir/count")
          start=171
          end=180
          if [ "$start" -gt "$total" ]; then
            printf '%s\n' "range 171-180 beyond total $total; skipping"
            exit 0
          fi
          if [ "$end" -gt "$total" ]; then
            end=$total
          fi
          for idx in $(seq "$start" "$end"); do
            block="$gloss_dir/block-$(printf '%03d' "$idx").sh"
            if [ ! -s "$block" ]; then
              printf '%s\n' "missing block $idx" >&2
              exit 1
            fi
            . "$block"
          done
          set +e
          ( banish 8 --only --no-tests --no-heal )
          status=$?
          if [ "$status" -eq 139 ]; then
            printf '%s\n' "subshell banish exited with code 139 (SIGSEGV)"
            printf '%s\n' "Last 50 dmesg lines (if available):"
            dmesg | tail -n 50 || true
          fi
          exit "$status"

  job-139-363-181-190:
    name: "139-363 blocks 181-190"
    runs-on: ubuntu-latest
    timeout-minutes: 60
    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: Install attr
        run: |
          sudo apt-get update
          sudo apt-get install -y attr

      - name: Run blocks 181-190
        shell: bash
        run: |
          set -euo pipefail
          export WIZARDRY_DIR="$GITHUB_WORKSPACE"
          . "$WIZARDRY_DIR/spells/.imps/sys/invoke-wizardry"
          gloss_dir=$(mktemp -d /tmp/wizardry-gloss-blocks.XXXXXX)
          gloss_file=$(mktemp /tmp/wizardry-gloss.XXXXXX)
          "$WIZARDRY_DIR/spells/.wizardry/generate-glosses" --output "$gloss_file"
          awk_program=$(printf '%s\n' \
            'BEGIN { idx=0; out="" }' \
            '/^# First-word gloss/ {' \
            '  idx++' \
            '  out=sprintf("%s/block-%03d.sh", outdir, idx)' \
            '  print "# block " idx > out' \
            '}' \
            '{ if (out != "") print >> out }' \
            'END { printf "%d\n", idx > outdir "/count" }')
          awk -v outdir="$gloss_dir" "$awk_program" "$gloss_file"
          total=$(cat "$gloss_dir/count")
          start=181
          end=190
          if [ "$start" -gt "$total" ]; then
            printf '%s\n' "range 181-190 beyond total $total; skipping"
            exit 0
          fi
          if [ "$end" -gt "$total" ]; then
            end=$total
          fi
          for idx in $(seq "$start" "$end"); do
            block="$gloss_dir/block-$(printf '%03d' "$idx").sh"
            if [ ! -s "$block" ]; then
              printf '%s\n' "missing block $idx" >&2
              exit 1
            fi
            . "$block"
          done
          set +e
          ( banish 8 --only --no-tests --no-heal )
          status=$?
          if [ "$status" -eq 139 ]; then
            printf '%s\n' "subshell banish exited with code 139 (SIGSEGV)"
            printf '%s\n' "Last 50 dmesg lines (if available):"
            dmesg | tail -n 50 || true
          fi
          exit "$status"

  job-139-363-191-200:
    name: "139-363 blocks 191-200"
    runs-on: ubuntu-latest
    timeout-minutes: 60
    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: Install attr
        run: |
          sudo apt-get update
          sudo apt-get install -y attr

      - name: Run blocks 191-200
        shell: bash
        run: |
          set -euo pipefail
          export WIZARDRY_DIR="$GITHUB_WORKSPACE"
          . "$WIZARDRY_DIR/spells/.imps/sys/invoke-wizardry"
          gloss_dir=$(mktemp -d /tmp/wizardry-gloss-blocks.XXXXXX)
          gloss_file=$(mktemp /tmp/wizardry-gloss.XXXXXX)
          "$WIZARDRY_DIR/spells/.wizardry/generate-glosses" --output "$gloss_file"
          awk_program=$(printf '%s\n' \
            'BEGIN { idx=0; out="" }' \
            '/^# First-word gloss/ {' \
            '  idx++' \
            '  out=sprintf("%s/block-%03d.sh", outdir, idx)' \
            '  print "# block " idx > out' \
            '}' \
            '{ if (out != "") print >> out }' \
            'END { printf "%d\n", idx > outdir "/count" }')
          awk -v outdir="$gloss_dir" "$awk_program" "$gloss_file"
          total=$(cat "$gloss_dir/count")
          start=191
          end=200
          if [ "$start" -gt "$total" ]; then
            printf '%s\n' "range 191-200 beyond total $total; skipping"
            exit 0
          fi
          if [ "$end" -gt "$total" ]; then
            end=$total
          fi
          for idx in $(seq "$start" "$end"); do
            block="$gloss_dir/block-$(printf '%03d' "$idx").sh"
            if [ ! -s "$block" ]; then
              printf '%s\n' "missing block $idx" >&2
              exit 1
            fi
            . "$block"
          done
          set +e
          ( banish 8 --only --no-tests --no-heal )
          status=$?
          if [ "$status" -eq 139 ]; then
            printf '%s\n' "subshell banish exited with code 139 (SIGSEGV)"
            printf '%s\n' "Last 50 dmesg lines (if available):"
            dmesg | tail -n 50 || true
          fi
          exit "$status"

  job-139-363-201-206:
    name: "139-363 blocks 201-206"
    runs-on: ubuntu-latest
    timeout-minutes: 60
    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: Install attr
        run: |
          sudo apt-get update
          sudo apt-get install -y attr

      - name: Run blocks 201-206
        shell: bash
        run: |
          set -euo pipefail
          export WIZARDRY_DIR="$GITHUB_WORKSPACE"
          . "$WIZARDRY_DIR/spells/.imps/sys/invoke-wizardry"
          gloss_dir=$(mktemp -d /tmp/wizardry-gloss-blocks.XXXXXX)
          gloss_file=$(mktemp /tmp/wizardry-gloss.XXXXXX)
          "$WIZARDRY_DIR/spells/.wizardry/generate-glosses" --output "$gloss_file"
          awk_program=$(printf '%s\n' \
            'BEGIN { idx=0; out="" }' \
            '/^# First-word gloss/ {' \
            '  idx++' \
            '  out=sprintf("%s/block-%03d.sh", outdir, idx)' \
            '  print "# block " idx > out' \
            '}' \
            '{ if (out != "") print >> out }' \
            'END { printf "%d\n", idx > outdir "/count" }')
          awk -v outdir="$gloss_dir" "$awk_program" "$gloss_file"
          total=$(cat "$gloss_dir/count")
          start=201
          end=206
          if [ "$start" -gt "$total" ]; then
            printf '%s\n' "range 201-206 beyond total $total; skipping"
            exit 0
          fi
          if [ "$end" -gt "$total" ]; then
            end=$total
          fi
          for idx in $(seq "$start" "$end"); do
            block="$gloss_dir/block-$(printf '%03d' "$idx").sh"
            if [ ! -s "$block" ]; then
              printf '%s\n' "missing block $idx" >&2
              exit 1
            fi
            . "$block"
          done
          set +e
          ( banish 8 --only --no-tests --no-heal )
          status=$?
          if [ "$status" -eq 139 ]; then
            printf '%s\n' "subshell banish exited with code 139 (SIGSEGV)"
            printf '%s\n' "Last 50 dmesg lines (if available):"
            dmesg | tail -n 50 || true
          fi
          exit "$status"

