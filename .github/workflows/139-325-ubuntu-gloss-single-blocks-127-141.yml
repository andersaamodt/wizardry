name: 139-325 Ubuntu gloss single blocks 127-141

on:
  pull_request:

concurrency:
  group: ${{ github.workflow }}-${{ github.event.pull_request.number || github.ref }}
  cancel-in-progress: true

permissions:
  contents: read

jobs:
  block-127:
    name: 139-325 Ubuntu gloss block 127
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4
      - name: Install xattr tooling
        run: sudo apt-get update && sudo apt-get install -y attr
      - name: Load block 127 and run banish
        run: |
          set +e
          ulimit -c unlimited || true
          (
            set -e
            . spells/.imps/sys/invoke-wizardry
            gloss_dir=$(mktemp -d /tmp/wizardry-gloss-blocks.XXXXXX)
            gloss_file=$(mktemp /tmp/wizardry-gloss.XXXXXX)
            generate-glosses --output "$gloss_file"

            awk_program=$(printf '%s\n' \
              'BEGIN { idx=0; out="" }' \
              '/^# First-word gloss/ {' \
              '  idx++' \
              '  out=sprintf("%s/block-%03d.sh", outdir, idx)' \
              '  print "# block " idx > out' \
              '}' \
              '{ if (out != "") print >> out }' \
              'END { printf "%d\n", idx > outdir "/count" }')
            awk -v outdir="$gloss_dir" "$awk_program" "$gloss_file"

            block="$gloss_dir/block-127.sh"
            if [ ! -s "$block" ]; then
              printf "%s\n" "[gloss-test] missing block 127" >&2
              exit 1
            fi
            . "$block"
            banish 8 --only --no-tests --no-heal
          )
          status=$?
          if [ "$status" -eq 139 ]; then
            printf '%s\n' "subshell banish exited with code 139 (SIGSEGV)"
            printf '%s\n' "Last 50 dmesg lines (if available):"
            dmesg | tail -n 50 || true
          fi
          exit "$status"

  block-128:
    name: 139-326 Ubuntu gloss block 128
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4
      - name: Install xattr tooling
        run: sudo apt-get update && sudo apt-get install -y attr
      - name: Load block 128 and run banish
        run: |
          set +e
          ulimit -c unlimited || true
          (
            set -e
            . spells/.imps/sys/invoke-wizardry
            gloss_dir=$(mktemp -d /tmp/wizardry-gloss-blocks.XXXXXX)
            gloss_file=$(mktemp /tmp/wizardry-gloss.XXXXXX)
            generate-glosses --output "$gloss_file"

            awk_program=$(printf '%s\n' \
              'BEGIN { idx=0; out="" }' \
              '/^# First-word gloss/ {' \
              '  idx++' \
              '  out=sprintf("%s/block-%03d.sh", outdir, idx)' \
              '  print "# block " idx > out' \
              '}' \
              '{ if (out != "") print >> out }' \
              'END { printf "%d\n", idx > outdir "/count" }')
            awk -v outdir="$gloss_dir" "$awk_program" "$gloss_file"

            block="$gloss_dir/block-128.sh"
            if [ ! -s "$block" ]; then
              printf "%s\n" "[gloss-test] missing block 128" >&2
              exit 1
            fi
            . "$block"
            banish 8 --only --no-tests --no-heal
          )
          status=$?
          if [ "$status" -eq 139 ]; then
            printf '%s\n' "subshell banish exited with code 139 (SIGSEGV)"
            printf '%s\n' "Last 50 dmesg lines (if available):"
            dmesg | tail -n 50 || true
          fi
          exit "$status"

  block-129:
    name: 139-327 Ubuntu gloss block 129
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4
      - name: Install xattr tooling
        run: sudo apt-get update && sudo apt-get install -y attr
      - name: Load block 129 and run banish
        run: |
          set +e
          ulimit -c unlimited || true
          (
            set -e
            . spells/.imps/sys/invoke-wizardry
            gloss_dir=$(mktemp -d /tmp/wizardry-gloss-blocks.XXXXXX)
            gloss_file=$(mktemp /tmp/wizardry-gloss.XXXXXX)
            generate-glosses --output "$gloss_file"

            awk_program=$(printf '%s\n' \
              'BEGIN { idx=0; out="" }' \
              '/^# First-word gloss/ {' \
              '  idx++' \
              '  out=sprintf("%s/block-%03d.sh", outdir, idx)' \
              '  print "# block " idx > out' \
              '}' \
              '{ if (out != "") print >> out }' \
              'END { printf "%d\n", idx > outdir "/count" }')
            awk -v outdir="$gloss_dir" "$awk_program" "$gloss_file"

            block="$gloss_dir/block-129.sh"
            if [ ! -s "$block" ]; then
              printf "%s\n" "[gloss-test] missing block 129" >&2
              exit 1
            fi
            . "$block"
            banish 8 --only --no-tests --no-heal
          )
          status=$?
          if [ "$status" -eq 139 ]; then
            printf '%s\n' "subshell banish exited with code 139 (SIGSEGV)"
            printf '%s\n' "Last 50 dmesg lines (if available):"
            dmesg | tail -n 50 || true
          fi
          exit "$status"

  block-130:
    name: 139-328 Ubuntu gloss block 130
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4
      - name: Install xattr tooling
        run: sudo apt-get update && sudo apt-get install -y attr
      - name: Load block 130 and run banish
        run: |
          set +e
          ulimit -c unlimited || true
          (
            set -e
            . spells/.imps/sys/invoke-wizardry
            gloss_dir=$(mktemp -d /tmp/wizardry-gloss-blocks.XXXXXX)
            gloss_file=$(mktemp /tmp/wizardry-gloss.XXXXXX)
            generate-glosses --output "$gloss_file"

            awk_program=$(printf '%s\n' \
              'BEGIN { idx=0; out="" }' \
              '/^# First-word gloss/ {' \
              '  idx++' \
              '  out=sprintf("%s/block-%03d.sh", outdir, idx)' \
              '  print "# block " idx > out' \
              '}' \
              '{ if (out != "") print >> out }' \
              'END { printf "%d\n", idx > outdir "/count" }')
            awk -v outdir="$gloss_dir" "$awk_program" "$gloss_file"

            block="$gloss_dir/block-130.sh"
            if [ ! -s "$block" ]; then
              printf "%s\n" "[gloss-test] missing block 130" >&2
              exit 1
            fi
            . "$block"
            banish 8 --only --no-tests --no-heal
          )
          status=$?
          if [ "$status" -eq 139 ]; then
            printf '%s\n' "subshell banish exited with code 139 (SIGSEGV)"
            printf '%s\n' "Last 50 dmesg lines (if available):"
            dmesg | tail -n 50 || true
          fi
          exit "$status"

  block-131:
    name: 139-329 Ubuntu gloss block 131
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4
      - name: Install xattr tooling
        run: sudo apt-get update && sudo apt-get install -y attr
      - name: Load block 131 and run banish
        run: |
          set +e
          ulimit -c unlimited || true
          (
            set -e
            . spells/.imps/sys/invoke-wizardry
            gloss_dir=$(mktemp -d /tmp/wizardry-gloss-blocks.XXXXXX)
            gloss_file=$(mktemp /tmp/wizardry-gloss.XXXXXX)
            generate-glosses --output "$gloss_file"

            awk_program=$(printf '%s\n' \
              'BEGIN { idx=0; out="" }' \
              '/^# First-word gloss/ {' \
              '  idx++' \
              '  out=sprintf("%s/block-%03d.sh", outdir, idx)' \
              '  print "# block " idx > out' \
              '}' \
              '{ if (out != "") print >> out }' \
              'END { printf "%d\n", idx > outdir "/count" }')
            awk -v outdir="$gloss_dir" "$awk_program" "$gloss_file"

            block="$gloss_dir/block-131.sh"
            if [ ! -s "$block" ]; then
              printf "%s\n" "[gloss-test] missing block 131" >&2
              exit 1
            fi
            . "$block"
            banish 8 --only --no-tests --no-heal
          )
          status=$?
          if [ "$status" -eq 139 ]; then
            printf '%s\n' "subshell banish exited with code 139 (SIGSEGV)"
            printf '%s\n' "Last 50 dmesg lines (if available):"
            dmesg | tail -n 50 || true
          fi
          exit "$status"

  block-132:
    name: 139-330 Ubuntu gloss block 132
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4
      - name: Install xattr tooling
        run: sudo apt-get update && sudo apt-get install -y attr
      - name: Load block 132 and run banish
        run: |
          set +e
          ulimit -c unlimited || true
          (
            set -e
            . spells/.imps/sys/invoke-wizardry
            gloss_dir=$(mktemp -d /tmp/wizardry-gloss-blocks.XXXXXX)
            gloss_file=$(mktemp /tmp/wizardry-gloss.XXXXXX)
            generate-glosses --output "$gloss_file"

            awk_program=$(printf '%s\n' \
              'BEGIN { idx=0; out="" }' \
              '/^# First-word gloss/ {' \
              '  idx++' \
              '  out=sprintf("%s/block-%03d.sh", outdir, idx)' \
              '  print "# block " idx > out' \
              '}' \
              '{ if (out != "") print >> out }' \
              'END { printf "%d\n", idx > outdir "/count" }')
            awk -v outdir="$gloss_dir" "$awk_program" "$gloss_file"

            block="$gloss_dir/block-132.sh"
            if [ ! -s "$block" ]; then
              printf "%s\n" "[gloss-test] missing block 132" >&2
              exit 1
            fi
            . "$block"
            banish 8 --only --no-tests --no-heal
          )
          status=$?
          if [ "$status" -eq 139 ]; then
            printf '%s\n' "subshell banish exited with code 139 (SIGSEGV)"
            printf '%s\n' "Last 50 dmesg lines (if available):"
            dmesg | tail -n 50 || true
          fi
          exit "$status"

  block-133:
    name: 139-331 Ubuntu gloss block 133
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4
      - name: Install xattr tooling
        run: sudo apt-get update && sudo apt-get install -y attr
      - name: Load block 133 and run banish
        run: |
          set +e
          ulimit -c unlimited || true
          (
            set -e
            . spells/.imps/sys/invoke-wizardry
            gloss_dir=$(mktemp -d /tmp/wizardry-gloss-blocks.XXXXXX)
            gloss_file=$(mktemp /tmp/wizardry-gloss.XXXXXX)
            generate-glosses --output "$gloss_file"

            awk_program=$(printf '%s\n' \
              'BEGIN { idx=0; out="" }' \
              '/^# First-word gloss/ {' \
              '  idx++' \
              '  out=sprintf("%s/block-%03d.sh", outdir, idx)' \
              '  print "# block " idx > out' \
              '}' \
              '{ if (out != "") print >> out }' \
              'END { printf "%d\n", idx > outdir "/count" }')
            awk -v outdir="$gloss_dir" "$awk_program" "$gloss_file"

            block="$gloss_dir/block-133.sh"
            if [ ! -s "$block" ]; then
              printf "%s\n" "[gloss-test] missing block 133" >&2
              exit 1
            fi
            . "$block"
            banish 8 --only --no-tests --no-heal
          )
          status=$?
          if [ "$status" -eq 139 ]; then
            printf '%s\n' "subshell banish exited with code 139 (SIGSEGV)"
            printf '%s\n' "Last 50 dmesg lines (if available):"
            dmesg | tail -n 50 || true
          fi
          exit "$status"

  block-134:
    name: 139-332 Ubuntu gloss block 134
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4
      - name: Install xattr tooling
        run: sudo apt-get update && sudo apt-get install -y attr
      - name: Load block 134 and run banish
        run: |
          set +e
          ulimit -c unlimited || true
          (
            set -e
            . spells/.imps/sys/invoke-wizardry
            gloss_dir=$(mktemp -d /tmp/wizardry-gloss-blocks.XXXXXX)
            gloss_file=$(mktemp /tmp/wizardry-gloss.XXXXXX)
            generate-glosses --output "$gloss_file"

            awk_program=$(printf '%s\n' \
              'BEGIN { idx=0; out="" }' \
              '/^# First-word gloss/ {' \
              '  idx++' \
              '  out=sprintf("%s/block-%03d.sh", outdir, idx)' \
              '  print "# block " idx > out' \
              '}' \
              '{ if (out != "") print >> out }' \
              'END { printf "%d\n", idx > outdir "/count" }')
            awk -v outdir="$gloss_dir" "$awk_program" "$gloss_file"

            block="$gloss_dir/block-134.sh"
            if [ ! -s "$block" ]; then
              printf "%s\n" "[gloss-test] missing block 134" >&2
              exit 1
            fi
            . "$block"
            banish 8 --only --no-tests --no-heal
          )
          status=$?
          if [ "$status" -eq 139 ]; then
            printf '%s\n' "subshell banish exited with code 139 (SIGSEGV)"
            printf '%s\n' "Last 50 dmesg lines (if available):"
            dmesg | tail -n 50 || true
          fi
          exit "$status"

  block-135:
    name: 139-333 Ubuntu gloss block 135
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4
      - name: Install xattr tooling
        run: sudo apt-get update && sudo apt-get install -y attr
      - name: Load block 135 and run banish
        run: |
          set +e
          ulimit -c unlimited || true
          (
            set -e
            . spells/.imps/sys/invoke-wizardry
            gloss_dir=$(mktemp -d /tmp/wizardry-gloss-blocks.XXXXXX)
            gloss_file=$(mktemp /tmp/wizardry-gloss.XXXXXX)
            generate-glosses --output "$gloss_file"

            awk_program=$(printf '%s\n' \
              'BEGIN { idx=0; out="" }' \
              '/^# First-word gloss/ {' \
              '  idx++' \
              '  out=sprintf("%s/block-%03d.sh", outdir, idx)' \
              '  print "# block " idx > out' \
              '}' \
              '{ if (out != "") print >> out }' \
              'END { printf "%d\n", idx > outdir "/count" }')
            awk -v outdir="$gloss_dir" "$awk_program" "$gloss_file"

            block="$gloss_dir/block-135.sh"
            if [ ! -s "$block" ]; then
              printf "%s\n" "[gloss-test] missing block 135" >&2
              exit 1
            fi
            . "$block"
            banish 8 --only --no-tests --no-heal
          )
          status=$?
          if [ "$status" -eq 139 ]; then
            printf '%s\n' "subshell banish exited with code 139 (SIGSEGV)"
            printf '%s\n' "Last 50 dmesg lines (if available):"
            dmesg | tail -n 50 || true
          fi
          exit "$status"

  block-136:
    name: 139-334 Ubuntu gloss block 136
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4
      - name: Install xattr tooling
        run: sudo apt-get update && sudo apt-get install -y attr
      - name: Load block 136 and run banish
        run: |
          set +e
          ulimit -c unlimited || true
          (
            set -e
            . spells/.imps/sys/invoke-wizardry
            gloss_dir=$(mktemp -d /tmp/wizardry-gloss-blocks.XXXXXX)
            gloss_file=$(mktemp /tmp/wizardry-gloss.XXXXXX)
            generate-glosses --output "$gloss_file"

            awk_program=$(printf '%s\n' \
              'BEGIN { idx=0; out="" }' \
              '/^# First-word gloss/ {' \
              '  idx++' \
              '  out=sprintf("%s/block-%03d.sh", outdir, idx)' \
              '  print "# block " idx > out' \
              '}' \
              '{ if (out != "") print >> out }' \
              'END { printf "%d\n", idx > outdir "/count" }')
            awk -v outdir="$gloss_dir" "$awk_program" "$gloss_file"

            block="$gloss_dir/block-136.sh"
            if [ ! -s "$block" ]; then
              printf "%s\n" "[gloss-test] missing block 136" >&2
              exit 1
            fi
            . "$block"
            banish 8 --only --no-tests --no-heal
          )
          status=$?
          if [ "$status" -eq 139 ]; then
            printf '%s\n' "subshell banish exited with code 139 (SIGSEGV)"
            printf '%s\n' "Last 50 dmesg lines (if available):"
            dmesg | tail -n 50 || true
          fi
          exit "$status"

  block-137:
    name: 139-335 Ubuntu gloss block 137
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4
      - name: Install xattr tooling
        run: sudo apt-get update && sudo apt-get install -y attr
      - name: Load block 137 and run banish
        run: |
          set +e
          ulimit -c unlimited || true
          (
            set -e
            . spells/.imps/sys/invoke-wizardry
            gloss_dir=$(mktemp -d /tmp/wizardry-gloss-blocks.XXXXXX)
            gloss_file=$(mktemp /tmp/wizardry-gloss.XXXXXX)
            generate-glosses --output "$gloss_file"

            awk_program=$(printf '%s\n' \
              'BEGIN { idx=0; out="" }' \
              '/^# First-word gloss/ {' \
              '  idx++' \
              '  out=sprintf("%s/block-%03d.sh", outdir, idx)' \
              '  print "# block " idx > out' \
              '}' \
              '{ if (out != "") print >> out }' \
              'END { printf "%d\n", idx > outdir "/count" }')
            awk -v outdir="$gloss_dir" "$awk_program" "$gloss_file"

            block="$gloss_dir/block-137.sh"
            if [ ! -s "$block" ]; then
              printf "%s\n" "[gloss-test] missing block 137" >&2
              exit 1
            fi
            . "$block"
            banish 8 --only --no-tests --no-heal
          )
          status=$?
          if [ "$status" -eq 139 ]; then
            printf '%s\n' "subshell banish exited with code 139 (SIGSEGV)"
            printf '%s\n' "Last 50 dmesg lines (if available):"
            dmesg | tail -n 50 || true
          fi
          exit "$status"

  block-138:
    name: 139-336 Ubuntu gloss block 138
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4
      - name: Install xattr tooling
        run: sudo apt-get update && sudo apt-get install -y attr
      - name: Load block 138 and run banish
        run: |
          set +e
          ulimit -c unlimited || true
          (
            set -e
            . spells/.imps/sys/invoke-wizardry
            gloss_dir=$(mktemp -d /tmp/wizardry-gloss-blocks.XXXXXX)
            gloss_file=$(mktemp /tmp/wizardry-gloss.XXXXXX)
            generate-glosses --output "$gloss_file"

            awk_program=$(printf '%s\n' \
              'BEGIN { idx=0; out="" }' \
              '/^# First-word gloss/ {' \
              '  idx++' \
              '  out=sprintf("%s/block-%03d.sh", outdir, idx)' \
              '  print "# block " idx > out' \
              '}' \
              '{ if (out != "") print >> out }' \
              'END { printf "%d\n", idx > outdir "/count" }')
            awk -v outdir="$gloss_dir" "$awk_program" "$gloss_file"

            block="$gloss_dir/block-138.sh"
            if [ ! -s "$block" ]; then
              printf "%s\n" "[gloss-test] missing block 138" >&2
              exit 1
            fi
            . "$block"
            banish 8 --only --no-tests --no-heal
          )
          status=$?
          if [ "$status" -eq 139 ]; then
            printf '%s\n' "subshell banish exited with code 139 (SIGSEGV)"
            printf '%s\n' "Last 50 dmesg lines (if available):"
            dmesg | tail -n 50 || true
          fi
          exit "$status"

  block-139:
    name: 139-337 Ubuntu gloss block 139
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4
      - name: Install xattr tooling
        run: sudo apt-get update && sudo apt-get install -y attr
      - name: Load block 139 and run banish
        run: |
          set +e
          ulimit -c unlimited || true
          (
            set -e
            . spells/.imps/sys/invoke-wizardry
            gloss_dir=$(mktemp -d /tmp/wizardry-gloss-blocks.XXXXXX)
            gloss_file=$(mktemp /tmp/wizardry-gloss.XXXXXX)
            generate-glosses --output "$gloss_file"

            awk_program=$(printf '%s\n' \
              'BEGIN { idx=0; out="" }' \
              '/^# First-word gloss/ {' \
              '  idx++' \
              '  out=sprintf("%s/block-%03d.sh", outdir, idx)' \
              '  print "# block " idx > out' \
              '}' \
              '{ if (out != "") print >> out }' \
              'END { printf "%d\n", idx > outdir "/count" }')
            awk -v outdir="$gloss_dir" "$awk_program" "$gloss_file"

            block="$gloss_dir/block-139.sh"
            if [ ! -s "$block" ]; then
              printf "%s\n" "[gloss-test] missing block 139" >&2
              exit 1
            fi
            . "$block"
            banish 8 --only --no-tests --no-heal
          )
          status=$?
          if [ "$status" -eq 139 ]; then
            printf '%s\n' "subshell banish exited with code 139 (SIGSEGV)"
            printf '%s\n' "Last 50 dmesg lines (if available):"
            dmesg | tail -n 50 || true
          fi
          exit "$status"

  block-140:
    name: 139-338 Ubuntu gloss block 140
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4
      - name: Install xattr tooling
        run: sudo apt-get update && sudo apt-get install -y attr
      - name: Load block 140 and run banish
        run: |
          set +e
          ulimit -c unlimited || true
          (
            set -e
            . spells/.imps/sys/invoke-wizardry
            gloss_dir=$(mktemp -d /tmp/wizardry-gloss-blocks.XXXXXX)
            gloss_file=$(mktemp /tmp/wizardry-gloss.XXXXXX)
            generate-glosses --output "$gloss_file"

            awk_program=$(printf '%s\n' \
              'BEGIN { idx=0; out="" }' \
              '/^# First-word gloss/ {' \
              '  idx++' \
              '  out=sprintf("%s/block-%03d.sh", outdir, idx)' \
              '  print "# block " idx > out' \
              '}' \
              '{ if (out != "") print >> out }' \
              'END { printf "%d\n", idx > outdir "/count" }')
            awk -v outdir="$gloss_dir" "$awk_program" "$gloss_file"

            block="$gloss_dir/block-140.sh"
            if [ ! -s "$block" ]; then
              printf "%s\n" "[gloss-test] missing block 140" >&2
              exit 1
            fi
            . "$block"
            banish 8 --only --no-tests --no-heal
          )
          status=$?
          if [ "$status" -eq 139 ]; then
            printf '%s\n' "subshell banish exited with code 139 (SIGSEGV)"
            printf '%s\n' "Last 50 dmesg lines (if available):"
            dmesg | tail -n 50 || true
          fi
          exit "$status"

  block-141:
    name: 139-339 Ubuntu gloss block 141
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4
      - name: Install xattr tooling
        run: sudo apt-get update && sudo apt-get install -y attr
      - name: Load block 141 and run banish
        run: |
          set +e
          ulimit -c unlimited || true
          (
            set -e
            . spells/.imps/sys/invoke-wizardry
            gloss_dir=$(mktemp -d /tmp/wizardry-gloss-blocks.XXXXXX)
            gloss_file=$(mktemp /tmp/wizardry-gloss.XXXXXX)
            generate-glosses --output "$gloss_file"

            awk_program=$(printf '%s\n' \
              'BEGIN { idx=0; out="" }' \
              '/^# First-word gloss/ {' \
              '  idx++' \
              '  out=sprintf("%s/block-%03d.sh", outdir, idx)' \
              '  print "# block " idx > out' \
              '}' \
              '{ if (out != "") print >> out }' \
              'END { printf "%d\n", idx > outdir "/count" }')
            awk -v outdir="$gloss_dir" "$awk_program" "$gloss_file"

            block="$gloss_dir/block-141.sh"
            if [ ! -s "$block" ]; then
              printf "%s\n" "[gloss-test] missing block 141" >&2
              exit 1
            fi
            . "$block"
            banish 8 --only --no-tests --no-heal
          )
          status=$?
          if [ "$status" -eq 139 ]; then
            printf '%s\n' "subshell banish exited with code 139 (SIGSEGV)"
            printf '%s\n' "Last 50 dmesg lines (if available):"
            dmesg | tail -n 50 || true
          fi
          exit "$status"
